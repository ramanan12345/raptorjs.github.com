<!DOCTYPE html><html><head><title>RaptorJS: Widgets</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="../static/widgets-head-43a72858.css">
<link rel="stylesheet" type="text/css" href="../static/docs-head-92a77b85.css">
<link rel="stylesheet" type="text/css" href="../static/code-editor-head-6a226e30.css"><script type="text/javascript">var
_gaq=_gaq||[];_gaq.push(["_setAccount","UA-33982282-1"]);_gaq.push(["_trackPageview"]);(function(){var
a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var
b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script></head><body><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container"><a class="brand" href="../">RaptorJS</a><ul class="nav"><li class="divider-vertical"></li><li id="s1178"><a href="../get-started/">Get Started</a></li><li class="divider-vertical"></li><li id="s1179" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Learn<b class="caret"></b></a><ul class="dropdown-menu"><li id="s1180"><a href="../">Overview</a></li><li id="s1181"><a href="../get-started/">Get Started</a></li><li id="s1182"><a href="../tutorial/">Tutorial</a></li><li id="s1183"><a href="../api/">API Reference</a></li><li id="s1184"><a href="../faq/">FAQ</a></li><li class="divider"></li><li id="s1185"><a href="../modules-classes/">Modules and Classes</a></li><li id="s1186"><a href="../packaging/">Packaging and Extensions</a></li><li id="s1187"><a href="../module-loader/">Module Loader</a></li><li id="s1188"><a href="../optimizer/">Optimizer</a></li><li id="s1189"><a href="../raptor-templates/">Raptor Templates</a></li><li id="s1190" class="active nav-item-active"><a href="../widgets/">Widgets Framework</a></li><li id="s1191"><a href="../logging/">Logging</a></li><li id="s1192"><a href="../resource-search-path/">Resource Search Path</a></li><li id="s1193"><a href="../cross-environment/">Cross Environment Support</a></li></ul></li><li class="divider-vertical"></li><li id="s1194" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Community<b class="caret"></b></a><ul class="dropdown-menu"><li id="s1195"><a href="https://github.com/raptorjs/raptorjs">Source code</a></li><li id="s1196"><a href="https://github.com/raptorjs/raptorjs/issues">Issue Tracker</a></li><li id="s1197"><a href="../contribute/">Contribute</a></li><li id="s1198"><a href="../contributors/">Contributors</a></li><li class="divider"></li><li id="s1199"><a href="http://groups.google.com/group/raptorjs">Discussion Forum</a></li><li class="divider"></li><li id="s1200"><a href="http://twitter.com/raptorjs">Twitter (@raptorjs)</a></li><li id="s1201"><a href="http://twitter.com/raptorjs">Google+</a></li></ul></li><li class="divider-vertical"></li><li id="s1202" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">About<b class="caret"></b></a><ul class="dropdown-menu"><li id="s1203"><a href="https://github.com/raptorjs/raptorjs/wiki/Release-Notes">Release Notes</a></li><li id="s1204"><a href="../design-philosophy/">Design Philosophy</a></li><li id="s1205"><a href="../license/">License</a></li><li id="s1206"><a href="../credits/">Credits</a></li><li id="s1207"><a href="../creators/">Creators</a></li></ul></li><li class="divider-vertical"></li></ul></div></div></div><div class="container"><div class="docs"><div class="bd"><div class="toc nav" id="docsNav"><ul class="toc"><li class="toc toc-level-0"><a href="#Overview">Overview</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Widget_Life_Cycle">Widget Life Cycle</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Initialization">Initialization</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Widget_JSP_Tags">Widget JSP Tags</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Widget_JSP_Tag_File">Widget JSP Tag File</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Widget_JavaScript_Classes">Widget JavaScript Classes</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Widget_DOM_Elements">Widget DOM Elements</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#DOM_Events">DOM Events</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Custom_Widget_Events">Custom Widget Events</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#ParentChild_Communication">Parent/Child Communication</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Widget_Directory_Structures">Widget Directory Structures</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Including_Widget_Resources">Including Widget Resources</a><ul class="toc"></ul></li></ul><div class="docs-nav-footer"><ul><li><span class="powered-by">Powered by <a href="../" class="raptorjs">RaptorJS</a></span></li><li><a href="../license/">License</a></li><li><a href="../credits/">Credits</a></li></ul></div></div><div class="docs-content"><h1 id="title">Widgets</h1><div class="section section-level-0"><h2 id="Overview">Overview</h2><div class="bd"><p>Widgets are JavaScript classes that get instantiated on the client and are
bound to a DOM node. Widgets can have children and the widget tree is
automatically constructed by the Raptor framework based on how the widgets were
rendered to HTML. Raptor manages the life cycle of the widgets and
automatically initializes them at the appropriate time when loading the page in
the browser by generating the required HTML code. Since a widget tree is
constructed, a parent can access its child widgets and a child widget can
access its parent. All widgets are made observable so that other widgets can
subscribe to custom events that a widget publishes. A widget instance has
access to its DOM elements and jQuery should be used for all DOM access and
manipulation.</p><p>A widget consists of the following resources.</p><ul><li>A JSP tag file that defines the HTML template and uses the <code><span class="confluence-link">&lt;r:widget&gt;</span></code> tag</li><li>A JavaScript file that defines the JavaScript class for the widget</li><li>A CSS file that defines any style information for the widget (optional)</li></ul></div></div><div class="section section-level-0"><h2 id="Widget_Life_Cycle">Widget Life Cycle</h2><div class="bd"><ol><li>Server<ol><li>The HTML for the widget is rendered while processing the JSP template</li><li>JavaScript code to initialize all of the rendered widgets is added to the end
of the page and sent to the
browser</li></ol></li><li>Browser<ol><li>The browser renders the widgets based on the HTML code produced by the widgets</li><li>The browser processes the JavaScript code to initialize the widgets<ol><li>The widgets are initialized (children first) and the widget tree is constructed</li><li>The widget constructor is invoked during the document "ready" event</li></ol></li></ol></li></ol></div></div><div class="section section-level-0"><h2 id="Initialization">Initialization</h2><div class="bd"><p>A widget is initialized in the browser using code that was generated while
processing the JSP. Each widget rendered results in a new widget instance being
created in the browser. By default, all widgets are initialized during the "DOM
ready" event so that you can be sure that all DOM elements on the page are
ready and
accessible.</p><p>It's possible to force a widget to initialize immediately by adding a <code>initBeforeOnDomReady</code> property to the widget prototype with a value of <code>true</code>. Usage of this special property should be rare.</p></div></div><div class="section section-level-0"><h2 id="Widget_JSP_Tags">Widget JSP Tags</h2><div class="bd"><h3>&lt;r:widget&gt;</h3><p>The JSP body fragment for the widget must be wrapped in a &lt;r:widget&gt; tag.
Each widget should be in its own JSP tag file and, by convention, there should
typically only be one
<code>&lt;r:widget&gt;</code> tag per JSP tag file. The <code>&lt;r:widget&gt;</code> tag supports the following attributes.</p><ul><li><strong>jsClass</strong> &ndash; The name of the JavaScript class for the widget.&nbsp;</li><li><strong>id</strong>&nbsp;&ndash; The assigned child ID for the widget (the parent widget can refer
to the child widget via this
ID)</li><li><strong>cssPath</strong> &ndash;&nbsp;The resource path to the CSS file for the widget (relative to a
resource search path entry. See
<a href="#Widgets-IncludingWidgetResources">Including Widget Resources</a>&nbsp;below)</li></ul><p>A new instance of the widget's JavaScript class is instantiated in the browser
for every instance of the widget rendered. In addition, if a widget is rendered
in the scope of another widget, the child widget instance is added as a child
of the parent widget instance in the
browser.</p><p>Raptor automatically includes the JavaScript file for the widget if it is found
by searching for the resource in the Raptor resource search path
(see&nbsp;<a href="#Widgets-IncludingWidgetResources">Including Widget Resources</a>&nbsp;below). Raptor converts the class name to a resource path. The following
example illustrates how a class name is resolved to a JavaScript file in a
bundle.</p><ul><li>Class name:&nbsp;<code>test.MyWidget</code></li><li>Resource Path: <code>/test/MyWidget.js</code></li><li>Resource Search Path:&nbsp;<code>["/js/widgets","/css/widgets"]</code></li><li>Resolved path:&nbsp;<code>/js/widgets/test/MyWidget</code></li></ul><h3>&lt;r:widgetConfig&gt; and &lt;r:property&gt;</h3><p>Sometimes it is necessary to pass information available at render time to the
widget instance when it is initialized in the browser. The
<code>&lt;r:widgetConfig&gt;</code> tag and the <code>&lt;r:property&gt;</code> tags can be used for this purpose. The <code>&lt;r:widgetConfig&gt;</code> tag must be nested within a <code>&lt;r:widget&gt;</code> tag. In addition, the properties that need to be passed to the widget instance
should be provided as
<code>&lt;r:property&gt;</code> tags nested within the <code>&lt;r:widgetConfig&gt;</code> tag. The&nbsp;<span><code>&lt;r:widgetConfig&gt;</code> does not support any attributes but the&nbsp;<code>&lt;r:property&gt;</code> supports the following attributes.</span></p><ul><li><code>name</code> - The name of the property<span>&nbsp;</span></li><li><code>value</code> - The value of the property. The value supports EL expressions and the value
can be a primitive Java type (for example,
<code>int</code>, <code>boolean</code>, <code>String</code>) or a complex Java bean.</li></ul><p>Each property is added to a HashMap with each property name as the key and the
corresponding property value as the value. The resulting HashMap is serialized
to JSON on the server using the
<a rel="nofollow" class="external-link ebayLVTracking_exit" href="http://jackson.codehaus.org/">Jackson JSON serializer</a>. The Jackson JSON serializer uses reflection to serialize any Java beans.</p><p>Care must be taken to make sure that there are no cyclic references. In
addition, the Java beans being serialized as property values
should&nbsp;<strong>only</strong> include getters for properties that should be serialized and sent to the
browser. Unnecessary data being serialized will result in poor
performance.</p><p>The resulting widget configuration is passed to the constructor of the widget
in the browser as a native JavaScript object with properties that correspond to
the properties passed in via the
<code>&lt;r:property&gt;</code> tags.</p><h4>Example Widget Config</h4><div class="code-editor" id="s1208"> <textarea id="s1208-textarea" style="display: none;" name="code-134">&lt;r:widgetConfig>
&lt;r:property name="modal" value="${modal}"/>
&lt;r:property name="autoShow" value="${autoShow}"/>
&lt;/r:widgetConfig></textarea></div><p>Given the above widget config definition, the generated JavaScript config
object can be accessed in the constructor for the widget as shown in the
following
example:</p><div class="code-editor" id="s1209"> <textarea id="s1209-textarea" style="display: none;" name="code-135">raptor.defineClass('containers.DialogWidget', function(raptor) {
    return {
        //...                    
        init: function(widgetConfig) {
            this.modal = widgetConfig.modal === true;
            this.visible = widgetConfig.autoShow === true;
            //...
        },       
        //...
    };
});</textarea></div></div></div><div class="section section-level-0"><h2 id="Widget_JSP_Tag_File">Widget JSP Tag File</h2><div class="bd"><p>A widget JSP tag file should be used when building a widget. The JSP tag file
defines the attributes that are supported by the generated JSP tag handler. The
values of the attributes should be used to control the HTML output and they may
also be used to control the widget config. A JSP tag file should only a single
<code>&lt;r:widget&gt;</code> tag as the root element.</p><p>Every widget should support an <code>id</code> attribute that allows the parent widget to assign an ID to the child widget.
The value of the
<code>id</code> attribute should be assigned to the <code>id</code> attribute of the <code>&lt;r:widget&gt;</code> tag.</p><h3>Example Widget JSP Tag File</h3><div class="code-editor" id="s1210"> <textarea id="s1210-textarea" style="display: none;" name="code-136">&lt;%@ tag description="Raptor Dialog Widget" pageEncoding="UTF-8" %>
 
&lt;%@ taglib prefix="r" uri="http://ebay.com/raptor" %>
&lt;%@ taglib prefix="rui" uri="http://ebay.com/raptor/ui" %>
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
 
&lt;!-- Widget attributes -->
&lt;%@ attribute name="id" description="widget ID" %> &lt;!-- Every widget should support an "id" attribute! -->
&lt;%@ attribute name="title" description="Dialog title" %>
&lt;%@ attribute name="modal" description="Is modal" %>
&lt;%@ attribute name="autoShow" description="Should the dialog be automatically shown" %>
 
&lt;!-- This widget depends on jQuery UI -->
&lt;rui:include-jquery-ui/>
 
&lt;!-- The value of the "id" attribute is passed to the widget tag -->
&lt;r:widget id="${id}" jsClass="containers.DialogWidget">
 
    &lt;!-- The next element is the root element for the widget -->
    &lt;div id="${widget.elId}" title="${title}" style="display:none;">
        &lt;p>
            &lt;!-- Render nested content inside the &lt;p> tags -->
            &lt;jsp:doBody/>
        &lt;/p>
    &lt;/div>
 
    &lt;!-- Widget Config -->   
    &lt;r:widgetConfig>
        &lt;r:property name="modal" value="${modal}"/>
        &lt;r:property name="autoShow" value="${autoShow}"/>
    &lt;/r:widgetConfig>
     
&lt;/r:widget></textarea></div><h3>Example of Using a Widget Tag</h3><div class="code-editor" id="s1211"> <textarea id="s1211-textarea" style="display: none;" name="code-137">&lt;rui:raptorDialog id="myDialog" modal="true" autoShow="false"/></textarea></div><p>If an "id" attribute is provided when using a widget then the parent widget can
access the child widget using the provided ID as shown in the
<a href="#Widgets-ParentChildCommunication">Parent/Child Communication</a> section.</p></div></div><div class="section section-level-0"><h2 id="Widget_JavaScript_Classes">Widget JavaScript Classes</h2><div class="bd"><p>The <code>jsType</code> attributed specified for a <code>&lt;r:widget&gt;</code> tag is used by the RaptorJS "widgets" module to create an instance of a widget
class for the specified type in the browser. The widget JavaScript class should
be specified as a standard RaptorJS class using the
<code>raptor.defineClass(widgetClassName, factoryFunction)</code> method. The constructor for the widget will not be invoked until all of the
widget's children have been fully initialized and not until the "dom ready"
event has been fired. In addition, the JavaScript object for the widget config
is passed to the constructor function as the first
argumen.</p><h3>Example Widget JavaScript Class</h3><div class="code-editor" id="s1212"> <textarea id="s1212-textarea" style="display: none;" name="code-138"></textarea></div> raptor.defineClass( 'input.buttons.ButtonWidget', function(raptor) { return {
init: function(widgetConfig) { var _this = this;
this.$('#button').click(function() { _this.publish('click', _this); //Publish a
custom click event }); }, setLabel: function(label) {
this.getEl('button').innerHTML = label; } };
});</div></div><div class="section section-level-0"><h2 id="Widget_DOM_Elements">Widget DOM Elements</h2><div class="bd"><p>Raptor provides support for assigning IDs to widget DOM elements and then
accessing those elements inside the widget instance. The Raptor framework
guarantees that the element IDs are unique even if the widget is rendered
multiple times. The Raptor framework does this by assigning a unique ID to
every rendered widget and then prefixing all element IDs with the widget ID to
guarantee that the DOM element IDs are unique even if the widget is rendered
multiple times. The widget is always initialized with its generated ID and to
access a DOM element in a widget, the requested ID is simply prefixed with the
widget ID to resolve the final DOM element
ID.</p><h3>Assigning DOM Element IDs</h3><p>The elements nested within a <code>&lt;r:widget&gt;</code> tag should be assigned IDs using either of the following EL expressions.</p><ul><li><code>${widget.elId}</code>&nbsp;&ndash; The ID to use for the root HTML element associated with the widget</li><li><code>${widget.elId(id)}</code>&nbsp;&ndash; The ID to use for nested elements in a widget. The provided ID is
prefixed with the widget
ID</li></ul><h3>Accessing DOM Elements by ID and via jQuery Selectors</h3><p>Every widget instance is augmented with a <code>getEl(id)</code> method that should be used to access the raw DOM elements (i.e. a DOM element
that is not wrapped by jQuery). The
<code>id</code> parameter for the <code>getEl(id)</code> method is optional: if it is not provided, the root element for the widget is
returned (assuming the
<code>${widget.elId}</code> EL expression was used correctly).</p><p>In addition, if you would like to access a DOM element wrapped by jQuery, you
can use any of the following
approaches.</p><ul><li>Accessing the widget's root DOM element wrapped as a jQuery object: <ul><li>$(this.getEl())</li><li>this.$()</li></ul></li><li>Accessing a widget's DOM element by ID wrapped as a jQuery object: <ul><li>$(this.getEl("myEl"))</li><li>this.$("#myEl")</li></ul></li><li>Executing a jQuery selector scoped to the widget's root DOM element: <ul><li>$("LI.color", this.getEl())</li><li>this.$("LI.color")</li></ul></li><li>Executing a jQuery selector scoped to a widget's DOM element: <ul><li>$("LI.color", this.getEl("colorsUL"))</li><li>this.$("LI.color", "colorsUL")</li><li>this.$("#colorsUL LI.color")</li></ul></li></ul><p>Every widget is augmented with a Raptor "$" function that serves as proxy to
the actual jQuery "$" function. The Raptor $ function handles executing
selectors scoped to various widget DOM elements and it resolves widget element
IDs.</p><h3>Examples of Working with Widget DOM Elements</h3><div class="code-editor" id="s1213"> <textarea id="s1213-textarea" style="display: none;" name="code-139">&lt;r:widget id="${id}" jsClass="example.ColorsWidget">
    &lt;div id="${widget.elId}">
        &lt;ul id="${widget.elId('colorsUL')}">
            &lt;li class="color">red&lt;/li>
            &lt;li class="color">green&lt;/li>
            &lt;li class="color">blue&lt;/li>
        &lt;/ul>
    &lt;/div>
&lt;/r:widget></textarea></div><div class="code-editor" id="s1214"> <textarea id="s1214-textarea" style="display: none;" name="code-140">raptor.defineClass('example.ColorsWidget', function() {
    return {
        init: function(config) {
            this.$("#colorsUL li.color").each(function(i) {
                var color = $(this).text();
                $(this).css('backgroundColor', color);
            });
        }
    };
});</textarea></div></div></div><div class="section section-level-0"><h2 id="DOM_Events">DOM Events</h2><div class="bd"><p>Attach all DOM event listeners using the jQuery function or the Raptor jQuery
proxy function. For
example:</p><div class="code-editor" id="s1215"> <textarea id="s1215-textarea" style="display: none;" name="code-141">//Using the Raptor jQuery proxy function
this.$("#button").click(function() {
    //...
});
 
//Using jQuery directly
$(this.getEl("button")).click(function() {
    //...
});</textarea></div></div></div><div class="section section-level-0"><h2 id="Custom_Widget_Events">Custom Widget Events</h2><div class="bd"><p>Every widget supports publishing custom events and every widgets is made
"observable" so that other widgets can subscribe to custom events that a widget
publishes. Custom events are separate from DOM events and custom events allow
information to be shared with other widgets without exposing the underlying DOM
structure of a widget. Every widget instance supports the following
methods.</p><div class="code-editor" id="s1216"> <textarea id="s1216-textarea" style="display: none;" name="code-142">1) eventHandle subscribe(eventName, callbackFunction, thisObj, autoRemove)
2) eventHandle subscribe(eventCallbacks, thisObj, autoRemove)
3) publish(eventName, eventArgs)</textarea></div><p>Method #2 can be used to subscribe to multiple events at once. The <em>eventCallbacks</em> parameter should be an object with properties whose names are the event names
and the value is the callback function to use for the corresponding
event.</p><p>Each of the "<code>subscribe</code>" methods returns an event handle object that can be used to remove the event
listener. For #1, the event handle has a "unsubscribe" method that can be used
to unsubscribe the listener. For #2, when subscribe to multiple events, a
widget can unsubscribe from a single event by passing the event name to the
"unsubscribe" method or not pass any arguments to have the widget unsubscribe
from all
messages.</p><h3>Declaring Published Widget Events</h3><p>A widget must declare which events it is allowed to publish. The allowed events
should be specified as part of the "events" property assigned to the prototype
of the widget. The "events" property should be an array of event names that are
allowed to be
published.&nbsp;</p><p>If a widget tries to publish an event that is not declared then an exception
will be thrown. Similarly, if an attempt is made to subscribe to an event for a
widget that is not supported then an exception will be
thrown.</p><h3>Examples of Working with Custom Widget Events</h3><h5>Publishing widget events</h5><div class="code-editor" id="s1217"> <textarea id="s1217-textarea" style="display: none;" name="code-143">raptor.defineClass(
    'MyWidget',
    function() {
        return {
            //The allowed events must be declared
            events: ['testEvent', 'anotherEvent'],
             
            init: function() {
                this.publish('testEvent', {
                    hello: "world"
                });
 
                this.publish('anotherEvent', {
                    hello: "universe"
                });
            }
        }
    });</textarea></div><h5>Subscribing to widget events</h5><div class="code-editor" id="s1218"> <textarea id="s1218-textarea" style="display: none;" name="code-144">var dialogWidget = this.getChild("myDialog");
 
//Subscribing to a single event
var eventHandle = dialogWidget.subscribe('show', function(eventArgs) {
    this.logger().debug('Dialog shown');
    eventHandle.remove(); //Remove this listener
}, this);
 
//Subscribing to multiple events
var eventHandle2 = dialogWidget.subscribe({
    show: function(eventArgs) {
        this.logger().debug('Dialog shown');
        eventHandle2.remove('show'); //Remove the "show" listener
    },
     
    hide: function(eventArgs) {
        this.logger().debug('Dialog hidden');
        eventHandle2.remove('hide'); //Remove the "hide" listener
        //eventHandle2.removeAll(); //Remove both the "show" and "hide" listeners
    }
}, this);</textarea></div></div></div><div class="section section-level-0"><h2 id="ParentChild_Communication">Parent/Child Communication</h2><div class="bd"><p>A widget tree is constructed in the browser based on how the widgets were
rendered while processing the JSP templates. If a widget is rendered within the
scope of another widget, that widget becomes a child of the widget that it is
nested within. Therefore, each widget can access its parent and each parent
widget can access its children. Additionally, if a parent widget assigned an ID
to a child widget, that child can be accessed by the assigned child ID. An ID
can be assigned to a child widget by providing an "id" attribute. Each widget
instance is augmented with the following
methods:</p><ul><li><code>getParent()</code>&nbsp;&ndash; Returns the parent widget</li><li><code>getChild(childId)</code>&nbsp;&ndash; Returns the child widget with the specified ID</li><li><p class="p1"><code>getChildren()</code>&nbsp;&ndash; Returns an array of the children widgets in the order they were
added</p></li></ul><h3>Example of Parent/Child Communication</h3><p>Given the following widget JSP tag file:</p><h5>registrationForm.tag</h5><div class="code-editor" id="s1219"> <textarea id="s1219-textarea" style="display: none;" name="code-145">&lt;%@ tag description="eBay Registration Form" pageEncoding="UTF-8" %>
&lt;%@ taglib prefix="r" uri="http://ebay.com/raptor" %>
&lt;%@ taglib prefix="rui" uri="http://ebay.com/raptor/ui" %>
&lt;%@ attribute name="id" description="widget ID" %>
&lt;r:widget id="${id}" jsClass="users.RegistrationFormWidget">
    ...
    &lt;rui:dialog id="helpDialog" title="Help" width="320px">
        &lt;h1>Registration tips&lt;/h1>
        To register with eBay, ...
    &lt;/rui:dialog>
     
&lt;/r:widget></textarea></div><p>Each instance of <code>users.RegistrationFormWidget</code> can access the child button widget as shown in the following JavaScript for
the
<code>users.RegistrationFormWidget</code> class.</p><h5>RegistrationFormWidget.js</h5><div class="code-editor" id="s1220"> <textarea id="s1220-textarea" style="display: none;" name="code-146">raptor.defineClass(
    'users.RegistrationFormWidget',
    function() {
        return {
            init: function(widgetConfig) {
                var _this = this;
                 
                this.$("#helpLink").click(function() {
                    _this.getChild('helpDialog').show();
                });
                 
                //...
            }
            //...
        };
    });</textarea></div></div></div><div class="section section-level-0"><h2 id="Widget_Directory_Structures">Widget Directory Structures</h2><div class="bd"><p>The JSP tag file for a widget should be placed in the normal location for JSP
tag files. Use the following placement for the widget's JavaScript
file.</p><ul><li>"war" bundles:&nbsp; <code>/src/main/webapp/js/widgets</code></li><li>All other types of bundles (similar for CSS resources except that the <code>css</code> folder should be used instead of <code>js</code>): <code>/src/main/resources/META-INF/resources/js/widgets</code></li></ul></div></div><div class="section section-level-0"><h2 id="Including_Widget_Resources">Including Widget Resources</h2><div class="bd"><p>In order for Raptor to find the widget resources you must first update the <code>X-Raptor-Resource-Search-Path</code> header&nbsp;in the OSGi manifest <code>(META-INF/MANIFEST.MF</code>) for the bundle to include the base folders for the widget's JavaScript and
CSS resources as part of the
header.</p><div class="code-editor" id="s1221"> <textarea id="s1221-textarea" style="display: none;" name="code-147">X-Raptor-Resource-Search-Path: /js/widgets,/css/widgets</textarea></div><div class="code-editor" id="s1222"> <textarea id="s1222-textarea" style="display: none;" name="code-148">X-Raptor-Resource-Search-Path: /META-INF/resources/js/widgets,/META-INF/resources/css/widgets</textarea></div></div></div></div></div><div class="docs-footer-padding"></div></div></div><script type="text/javascript" src="../static/core-body-2834a6ab.js"></script>
<script type="text/javascript" src="../static/jquery-body-371da524.js"></script>
<script type="text/javascript" src="../static/widgets-body-06552a07.js"></script>
<script type="text/javascript" src="../static/code-editor-body-a2bab28c.js"></script><script type="text/javascript">$rwidgets(
["components.nav.Nav.NavItemWidget","s1178",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1179",0,0,0,0,
["components.nav.Nav.NavItemWidget","s1180",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1181",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1182",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1183",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1184",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1185",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1186",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1187",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1188",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1189",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1190",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1191",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1192",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1193",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s1194",0,0,0,0,
["components.nav.Nav.NavItemWidget","s1195",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1196",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1197",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1198",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1199",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1200",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1201",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s1202",0,0,0,0,
["components.nav.Nav.NavItemWidget","s1203",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1204",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1205",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1206",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1207",0,0,0,0]],
["components.editors.CodeEditor.CodeEditorWidget","s1208",0,0,{"mode":"xml","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1209",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1210",0,0,{"mode":"xml","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1211",0,0,{"mode":"xml","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1212",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1213",0,0,{"mode":"xml","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1214",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1215",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1216",0,0,{"mode":"text","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1217",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1218",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1219",0,0,{"mode":"xml","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1220",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1221",0,0,{"mode":"text","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s1222",0,0,{"mode":"text","autoResize":true,"readOnly":true},0]);</script></body></html>