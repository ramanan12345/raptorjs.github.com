<!DOCTYPE html><html><head><title>RaptorJS: Modules &amp; Classes</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="../../static/modules-classes-developer-guide-d2689e79.css">
<link rel="stylesheet" type="text/css" href="../../static/docs-caed8dce.css">
<link rel="stylesheet" type="text/css" href="../../static/code-editor-f1386401.css"><script type="text/javascript">var
_gaq=_gaq||[];_gaq.push(["_setAccount","UA-33982282-1"]);_gaq.push(["_trackPageview"]);(function(){var
a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var
b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script></head><body data-spy="scroll"><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container"><a class="brand" href="../../">RaptorJS</a><ul class="nav"><li class="divider-vertical"></li><li id="s494"><a href="../../get-started/">Get Started</a></li><li class="divider-vertical"></li><li id="s495" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Learn<b class="caret"></b></a><ul class="dropdown-menu"><li id="s496"><a href="../../">Overview</a></li><li id="s497"><a href="../../get-started/">Get Started</a></li><li id="s498"><a href="../../tutorial/">Tutorial</a></li><li id="s499"><a href="../../api/">API Reference</a></li><li id="s500"><a href="../../faq/">FAQ</a></li><li class="divider"></li><li id="s501"><a href="../../modules-classes/">Modules and Classes</a></li><li id="s502"><a href="../../packaging/">Packaging and Extensions</a></li><li id="s503"><a href="../../module-loader/">Module Loader</a></li><li id="s504"><a href="../../optimizer/">Optimizer</a></li><li id="s505"><a href="../../raptor-templates/">Raptor Templates</a></li><li id="s506"><a href="../../widgets/">Widget Framework</a></li><li id="s507"><a href="../../logging/">Logging</a></li><li id="s508"><a href="../../resource-search-path/">Resource Search Path</a></li><li id="s509"><a href="../../cross-environment/">Cross Environment Support</a></li></ul></li><li class="divider-vertical"></li><li id="s510" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Community<b class="caret"></b></a><ul class="dropdown-menu"><li id="s511"><a href="https://github.com/raptorjs/raptorjs">Source code</a></li><li id="s512"><a href="https://github.com/raptorjs/raptorjs/issues">Issue Tracker</a></li><li id="s513"><a href="../../contribute/">Contribute</a></li><li id="s514"><a href="../../contributors/">Contributors</a></li><li class="divider"></li><li id="s515"><a href="http://groups.google.com/group/raptorjs">Discussion Forum</a></li><li class="divider"></li><li id="s516"><a href="http://twitter.com/raptorjs">Twitter (@raptorjs)</a></li><li id="s517"><a href="http://twitter.com/raptorjs">Google+</a></li></ul></li><li class="divider-vertical"></li><li id="s518" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">About<b class="caret"></b></a><ul class="dropdown-menu"><li id="s519"><a href="https://github.com/raptorjs/raptorjs/wiki/Release-Notes">Release Notes</a></li><li id="s520"><a href="../../design-philosophy/">Design Philosophy</a></li><li id="s521"><a href="../../license/">License</a></li><li id="s522"><a href="../../credits/">Credits</a></li><li id="s523"><a href="../../creators/">Creators</a></li></ul></li><li class="divider-vertical"></li></ul></div></div></div><div class="container"><div class="docs"><div class="bd"><div class="docs-content"><h1 id="title">Getting Started with Modules, Classes, Mixins and Enums</h1><div class="toc nav" id="docsNav"><ul class="toc"><li class="toc toc-level-0"><a href="#Introduction">Introduction</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Basic_Usage">Basic Usage</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Modules">Modules</a><ul class="toc"><li class="toc toc-level-1"><a href="#Defining_a_Module">Defining a Module</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Using_a_Module">Using a Module</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Classes">Classes</a><ul class="toc"><li class="toc toc-level-1"><a href="#Defining_a_Class">Defining a Class</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Creating_an_Instance_of_a_Class">Creating an Instance of a Class</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Inheritance">Inheritance</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Mixins">Mixins</a><ul class="toc"><li class="toc toc-level-1"><a href="#Defining_a_Mixin">Defining a Mixin</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Applying_Mixins_as_part_of_an_Object_Definition">Applying Mixins as part of an Object Definition</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Applying_Mixins_External_to_an_Object_Definition">Applying Mixins External to an Object Definition</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Enums">Enums</a><ul class="toc"><li class="toc toc-level-1"><a href="#Defining_an_Enum">Defining an Enum</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Enum_Methods">Enum Methods</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Enum_Usage">Enum Usage</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Anonymous_Objects">Anonymous Objects</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Logging">Logging</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Discussion">Discussion</a><ul class="toc"></ul></li></ul><div class="docs-nav-footer"><ul><li><span class="powered-by">Powered by <a href="../../" class="raptorjs">RaptorJS</a></span></li><li><a href="../../license/">License</a></li><li><a href="../../credits/">Credits</a></li></ul></div></div><div class="message message-warning"><div class="icon"><i class="icon-warning-sign" style="font-size: 30px;"></i></div><div class="bd">Documentation In-Progress</div></div><div class="section section-level-0"><h2 id="Introduction">Introduction</h2><div class="bd"><p>Out of the box, JavaScript lacks basic support for namespaces, and defining and
using "classes" is not always elegant. Because JavaScript is a very dynamic
language many libraries and frameworks have been developed to address some of
these shortcomingsâ€”each with their own benefits and disadvantages. RaptorJS
aims to solve many of the problems in existing solutions through a
<i>simple</i>, yet powerful new syntax.</p><p>Once RaptorJS has been initialized, the global <code>raptor</code> object can be used to start defining modules, classes, mixins and enums. For
help with initializing RaptorJS please see the
<a href="../../get-started/">RaptorJS Getting Started Guide</a></p></div></div><div class="section section-level-0"><h2 id="Basic_Usage">Basic Usage</h2><div class="bd"><p>The basic pattern for defining RaptorJS objects is to associate a <i>factory function</i> with a <i>string</i> ID. The job of the factory function is to return the initialized object when
it is first
required.</p><p>To "require" an object using RaptorJS, the <code>require(id)</code> method should be used. The <code>require(id)</code> will initialize the required object if it had not previously required. An
object is initialized by invoking the factory function to get back the final
object. The initialized object is then cached so that it can simply be returned
for subsequent requires of the same object
ID.</p><p>On the server-side, if <code>require(id)</code> is invoked and the object has not been registered then RaptorJS goes through a
resolving phase to find and load the requested object from disk. For more
details, see
<a href="http://raptorjs.org/api/oop_Server/#_resolve">oop._resolve(id)</a>.</p></div></div><div class="section section-level-0"><h2 id="Modules">Modules</h2><div class="bd"><div class="section section-level-1"><h2 id="Defining_a_Module">Defining a Module</h2><div class="bd"><p>A JavaScript object/module can be associated with a name as shown in the
following example:
</p><div class="code-editor" id="s524"> <textarea id="s524-textarea" style="display: none;" name="code-8">define(
    'some/namespace/my-module', 
    function(require, exports, module) { //This function is only executed *once* (the first time this module is required)
        return { //Return the module definition
            sayHello: function() {
                console.log("Hello World!");
            }
        }
    });</textarea></div></div></div><div class="section section-level-1"><h2 id="Using_a_Module">Using a Module</h2><div class="bd"><p>The following code illustrates how to utilize another module/class/mixin/enum
by obtaining a reference to it using the
<code>require</code> function:</p><div class="code-editor" id="s525"> <textarea id="s525-textarea" style="display: none;" name="code-9">var myModule = require('some/namespace/my-module');
myModule.sayHello();</textarea></div><div class="message message-info"><div class="icon"><i class="icon-info-sign" style="font-size: 30px;"></i></div><div class="bd"><p>NOTE: When using <code>require(moduleName)</code>, the code for the requested module must be available. Asynchronous module
loading (loading a module asynchronously from a server) is provided by the
<a href="../../module-loader/">RaptorJS Asynchronous Module Loader</a>.</p></div></div></div></div></div></div><div class="section section-level-0"><h2 id="Classes">Classes</h2><div class="bd"><div class="section section-level-1"><h2 id="Defining_a_Class">Defining a Class</h2><div class="bd"><p>A class can be defined by creating a factory function that returns a
constructor function (with a
<code>prototype</code> property) as shown in the following example:</p><div class="code-editor" id="s526"> <textarea id="s526-textarea" style="display: none;" name="code-10">define(
    'some/namespace/MyClass', 
    function(require, module, exports) {
        var MyClass = function(message) { //Constructor function
            this.message = message;
        }

        MyClass.prototype = {
            sayHello: function() {
                console.log(this.message);
            }
        };

        return MyClass;
    });</textarea></div></div></div><div class="section section-level-1"><h2 id="Creating_an_Instance_of_a_Class">Creating an Instance of a Class</h2><div class="bd"><p>An instance of a class can be created as shown in the following example:</p><div class="code-editor" id="s527"> <textarea id="s527-textarea" style="display: none;" name="code-11">var MyClass = require("some/namespace/MyClass");
var myInstance = new MyClass();</textarea></div></div></div><div class="section section-level-1"><h2 id="Inheritance">Inheritance</h2><div class="bd"><p>Prototype-based class inheritance is also supported by RaptorJS when using the <code>define.Class</code> method. The signature for the <code>define.Class</code> method is the following:</p><div class="code-editor" id="s528"> <textarea id="s528-textarea" style="display: none;" name="code-12">define.Class(id, ?superclassId, ?dependencies, factory)</textarea></div><p>Example:</p><div class="code-editor" id="s529"> <textarea id="s529-textarea" style="display: none;" name="code-13">define.Class(
    'some/namespace/Dog', 
    'some/namespace/Animal', //Name of the superclass
    function(require, exports, module) {
        var Dog = function(breed) {
            Dog.superclass.constructor.call(this, "dog"); //Invoke the constructor of the superclass
            this.breed = breed;
        }

        Dog.prototype = {
            eat: function(food) {
                Dog.superclass.eat.apply(this, food); //Invoke the "eat" method in the superclass
                this.bark();
            },

            bark: function() {
                console.log("woof!");
            }
        };

        return Dog;
    });</textarea></div><div class="message message-info"><div class="icon"><i class="icon-info-sign" style="font-size: 30px;"></i></div><div class="bd"><p>The superclass argument can also be passed as part of a modifiers object as
shown in the following
example:</p><div class="code-editor" id="s530"> <textarea id="s530-textarea" style="display: none;" name="code-14">define.Class(
    'some/namespace/Dog', 
    {
        superclass: 'some/namespace/Animal' //Name of the superclass
    }, 
    function(require, exports, module) {
        ...
    });</textarea></div><p>This allows an anonymous class with a superclass to be define:</p><div class="code-editor" id="s531"> <textarea id="s531-textarea" style="display: none;" name="code-15">define.Class( 
    {
        superclass: 'some/namespace/Animal' //Name of the superclass
    }, 
    function(require, exports, module) {
        ...
    });</textarea></div></div></div><div class="message message-info"><div class="icon"><i class="icon-info-sign" style="font-size: 30px;"></i></div><div class="bd"><p>NOTE: When defining a class that extends another class, the returned
constructor function is populated with a "superclass" property that is a
reference to the prototype of the superclass. In addition, the prototype of a
class is always populated with a "constructor" property, which is a reference
to the constructor function for the class associated with the prototype
object.</p></div></div></div></div></div></div><div class="section section-level-0"><h2 id="Mixins">Mixins</h2><div class="bd"><div class="section section-level-1"><h2 id="Defining_a_Mixin">Defining a Mixin</h2><div class="bd"><p>RaptorJS allows mixins to be applied to an object in two different ways:</p><ol><li>As part of an object definition</li><li>External from the object being defined</li></ol></div></div><div class="section section-level-1"><h2 id="Applying_Mixins_as_part_of_an_Object_Definition">Applying Mixins as part of an Object Definition</h2><div class="bd"><p>Mixins can be applied declaratively as part of an object definition as shown in
the following
example</p><div class="code-editor" id="s532"> <textarea id="s532-textarea" style="display: none;" name="code-16">define.Class(
    'some/namespace/CircleButton',
    ['raptor'],
    function(raptor, require) {
        var CircleButton = function() {
        };
        
        CircleButton.prototype = {
            //...
        }
        
        //Apply mixins to the CircleButton's prototype:
        raptor.extend(
            CircleButton.prototype, 
            require('some/namespace/CircleMixin'));
        
        //NOTE: raptor.extend simply copies properties from one object to another
        
        return CircleButton;
    });</textarea></div></div></div><div class="section section-level-1"><h2 id="Applying_Mixins_External_to_an_Object_Definition">Applying Mixins External to an Object Definition</h2><div class="bd"><p>The <code>define.extend</code> method allows mixins to be lazily applied to another module when the module is
first required. The
<code>define.extend</code> method is used heavily to support cross-environment modules by creating
environment specific mixins for modules.
Example:</p><div class="code-editor" id="s533"> <textarea id="s533-textarea" style="display: none;" name="code-17">/**
 * Extends the "raptor/files" module with Rhino/Java specific mixins so that the
 * same module can work in multiple server-side JavaScript environments.
 * @extension Rhino
 */
define.extend(
    'raptor/files',
    function(require) {
        var JavaFile = Packages.java.io.File;

        return {
            exists: function(path) {
                return new JavaFile(path).exists();
            }
        }
    }
);</textarea></div></div></div></div></div><div class="section section-level-0"><h2 id="Enums">Enums</h2><div class="bd"><div class="section section-level-1"><h2 id="Defining_an_Enum">Defining an Enum</h2><div class="bd"><p>An enum type can be defined as shown in the following example:</p><div class="code-editor" id="s534"> <textarea id="s534-textarea" style="display: none;" name="code-18">define.Enum(
    'some/namespace/Day',
    [
        "SUN",
        "MON",
        "TUE",
        "WED",
        "THU",
        "FRI",
        "SAT"
    ]
);</textarea></div><p>Enum values as complex objects can be defined as shown in the following example:</p><div class="code-editor" id="s535"> <textarea id="s535-textarea" style="display: none;" name="code-19">define.Enum(
    'some/namespace/Day',
    {
        SUN: [false, "Sunday"],
        MON: [true, "Monday"],
        TUE: [true, "Tuesday"],
        WED: [true, "Wednesday"],
        THU: [true, "Thursday"],
        FRI: [true, "Friday"],
        SAT: [false, "Saturday"]
    },
    function(require) {
        return {
            init: function(isWeekday, longName) {
                this._isWeekday = isWeekday;
                this._longName = longName;
            },
             
            getLongName: function() {
                return this._longName;
            },
             
            isWeekday: function() {
                return this._isWeekday;
            }
        }
    }
);</textarea></div></div></div><div class="section section-level-1"><h2 id="Enum_Methods">Enum Methods</h2><div class="bd"><p>Every enum class supports the following methods.</p><ul><li>valueOf(name) - Returns the constant field with the same name (case sensitive)</li></ul><p>Every enum field supports the following methods.</p><ul><li>name() - Returns the name of the enum</li><li>ordinal() - Returns the positional value of the enum (NOTE: This should only be
used for an array of enum strings. Order is undefined for maps but it will work
correctly in most
browsers.)</li><li>toString() - Returns the name of the enum unless it has been overridden</li><li>compareTo(other) - Compares one enum field to another based on the ordinal value</li></ul></div></div><div class="section section-level-1"><h2 id="Enum_Usage">Enum Usage</h2><div class="bd"><p>Once you define an enum, the enum constants can be accessed as static
properties of the class as shown in the following
example.</p><div class="code-editor" id="s536"> <textarea id="s536-textarea" style="display: none;" name="code-20">var Day = require('some/namespace/Day');
if (day === Day.FRI) {
    alert("It is " + day.getLongName() + "!");
}</textarea></div></div></div></div></div><div class="section section-level-0"><h2 id="Anonymous_Objects">Anonymous Objects</h2><div class="bd"><p>Anonymous (unnamed objects) can be defined by omitting the name argument. For
example:</p><div class="code-editor" id="s537"> <textarea id="s537-textarea" style="display: none;" name="code-21">var myModule = define(
    function() {
        return {
            sayHello: function() {
                console.log("Hello World!");
            }
        }
    });
myModule.sayHello();</textarea></div></div></div><div class="section section-level-0"><h2 id="Logging">Logging</h2><div class="bd"><p>For convenience, all objects defined using RaptorJS will be populated with a
"logger" function that can be used to log messages at various log levels
(debug, info, warn, error, etc.). Whether or not anything actually shows will
depend on how the loggers are configured. Output messages will be prefixed with
the log level and the name of the object that logged the message. Loggers
should be configured when RaptorJS is first initialized. For
example:</p><p><div class="code-editor" id="s538"> <textarea id="s538-textarea" style="display: none;" name="code-22">require("raptor"); //Initialize RaptorJS on the server and enable AMD

//...

define(
    'some/namespace/my-module', 
    function(require, exports, module) { //This function is only executed *once* (the first time this module is required)
        var logger = module.logger();
        
        return { //Return the module definition
            sayHello: function() {
                logger.debug("Hello World!");
                /*
                 * Output:
                 * DEBUG some/namespace/my-module: Hello World!
                 */
            }
        }
    });</textarea></div></p><p>For more details on logging, see <a href="../../logging/">RaptorJS Logging</a>.</p></div></div><div class="section section-level-0"><h2 id="Discussion">Discussion</h2><div class="bd"><div id="disqus_thread"></div></div></div></div></div><div class="docs-footer-padding"></div></div></div><script type="text/javascript" src="../../static/core-473124cf.js"></script>
<script type="text/javascript" src="../../static/jquery-371da524.js"></script>
<script type="text/javascript" src="../../static/widgets-6666ff75.js"></script>
<script type="text/javascript" src="../../static/modules-classes-developer-guide-de31a680.js"></script>
<script type="text/javascript" src="../../static/code-editor-78c7d3ab.js"></script><script type="text/javascript">$rwidgets(
["components.nav.Nav.NavItemWidget","s494",0,0,0,0],
["components.nav.Nav.NavItemWidget","s495",0,0,0,0,
["components.nav.Nav.NavItemWidget","s496",0,0,0,0],
["components.nav.Nav.NavItemWidget","s497",0,0,0,0],
["components.nav.Nav.NavItemWidget","s498",0,0,0,0],
["components.nav.Nav.NavItemWidget","s499",0,0,0,0],
["components.nav.Nav.NavItemWidget","s500",0,0,0,0],
["components.nav.Nav.NavItemWidget","s501",0,0,0,0],
["components.nav.Nav.NavItemWidget","s502",0,0,0,0],
["components.nav.Nav.NavItemWidget","s503",0,0,0,0],
["components.nav.Nav.NavItemWidget","s504",0,0,0,0],
["components.nav.Nav.NavItemWidget","s505",0,0,0,0],
["components.nav.Nav.NavItemWidget","s506",0,0,0,0],
["components.nav.Nav.NavItemWidget","s507",0,0,0,0],
["components.nav.Nav.NavItemWidget","s508",0,0,0,0],
["components.nav.Nav.NavItemWidget","s509",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s510",0,0,0,0,
["components.nav.Nav.NavItemWidget","s511",0,0,0,0],
["components.nav.Nav.NavItemWidget","s512",0,0,0,0],
["components.nav.Nav.NavItemWidget","s513",0,0,0,0],
["components.nav.Nav.NavItemWidget","s514",0,0,0,0],
["components.nav.Nav.NavItemWidget","s515",0,0,0,0],
["components.nav.Nav.NavItemWidget","s516",0,0,0,0],
["components.nav.Nav.NavItemWidget","s517",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s518",0,0,0,0,
["components.nav.Nav.NavItemWidget","s519",0,0,0,0],
["components.nav.Nav.NavItemWidget","s520",0,0,0,0],
["components.nav.Nav.NavItemWidget","s521",0,0,0,0],
["components.nav.Nav.NavItemWidget","s522",0,0,0,0],
["components.nav.Nav.NavItemWidget","s523",0,0,0,0]],
["components.editors.CodeEditor.CodeEditorWidget","s524",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s525",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s526",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s527",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s528",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s529",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s530",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s531",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s532",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s533",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s534",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s535",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s536",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s537",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.editors.CodeEditor.CodeEditorWidget","s538",0,0,{"mode":"javascript","autoResize":true,"readOnly":true,"indentUnit":4},0],
["components.social.Disqus.DisqusWidget","disqus_thread",0,0,{"shortName":"raptor-js","id":"modules-developer-guide","title":"Getting Started with Modules, Classes, Mixins and Enums"},0]);</script></body></html>