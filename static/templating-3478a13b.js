define("raptor/strings/StringBuilder",function(e){"use strict";var t=function(){this.array=[],this.length=0};return t.prototype={append:function(e){return typeof e!="string"&&(e=e.toString()),this.array.push(e),this.length+=e.length,this},toString:function(){return this.array.join("")},clear:function(){return this.array=[],this.length=0,this}},t.prototype.write=t.prototype.append,t});
define("raptor/strings",["raptor"],function(e,t){"use strict";var n="",r=function(e){return e?e.trim():n},i=t("raptor/strings/StringBuilder"),s=/\$\{([A-Za-z0-9_\.]+)\}/g;return{compare:function(e,t){return e<t?-1:e>t?1:0},isEmpty:function(e){return e==null||r(e).length===0},length:function(e){return e==null?0:e.length},isString:function(e){return typeof e=="string"},equals:function(e,t,n){return n!==!1&&(e=r(e),t=r(t)),e==t},notEquals:function(e,t,n){return this.equals(e,t,n)===!1},trim:r,ltrim:function(e){return e?e.replace(/^\s\s*/,""):n},rtrim:function(e){return e?e.replace(/\s\s*$/,""):n},startsWith:function(e,t){return!e||e.length<t.length?!1:e.substring(0,t.length)===t},endsWith:function(e,t){return!e||e.length<t.length?!1:e.substring(e.length-t.length)===t},unicodeEncode:function(e){return"\\u"+("0000"+(+e.charCodeAt(0)).toString(16)).slice(-4)},merge:function(e,t){var n,r=[],i=0;s.lastIndex=0;while(n=s.exec(e))r.push(e.substring(i,n.index)),r.push(t[n[1]]||""),i=s.lastIndex;return r.push(e.substring(i)),r.join("")},StringBuilder:i,createStringBuilder:function(){return new i}}});
define("raptor/xml/utils",function(e,t,n){"use strict";var r=/[&<]/,i=/[&<]/g,s=/[&<>\"\'\n]/,o=/[&<>\"\'\n]/g,u={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;","\n":"&#10;"};return{escapeXml:function(e){return typeof e=="string"&&r.test(e)?e.replace(i,function(e){return u[e]}):e},escapeXmlAttr:function(e){return typeof e=="string"&&s.test(e)?e.replace(o,function(e){return u[e]}):e}}});
define.Class("raptor/templating/Context",["raptor"],function(e,t){"use strict";var n=e.forEachEntry,r=t("raptor/xml/utils").escapeXmlAttr,i=t("raptor/strings/StringBuilder"),s=0,o,u=function(e,t){return function(){return e.apply(t,arguments)}},a=function(e){this.writer=e,this.w=this.write};a.prototype={getAttributes:function(){return this.attributes||(this.attributes={})},uniqueId:function(){return s++},write:function(e){return e!==null&&e!==undefined&&(typeof e!="string"&&(e=e.toString()),this.writer.write(e)),this},getOutput:function(){return this.writer.toString()},captureString:function(e,t){var n=new i;return this.swapWriter(n,e,t),n.toString()},swapWriter:function(e,t,n){var r=this.writer;try{this.writer=e,t.call(n)}finally{this.writer=r}},invokeHandler:function(e,t){e.process(t,this)},getFunction:function(e,n){this._helpers||(this._helpers={});var r=e+":"+n,i=this._helpers[r],s;return i||(arguments.length===1?s=o[e]:s=t("raptor/templating").getFunction(e,n),i=this._helpers[r]=u(s,this)),i},isTagInput:function(e){return e&&e.hasOwnProperty("_tag")},renderTemplate:function(e,n){return t("raptor/templating").render(e,n,this),this},attr:function(e,t,n){if(t===null)t="";else{if(t===undefined||typeof t=="string"&&t.trim()==="")return this;t='="'+(n===!1?t:r(t))+'"'}return this.write(" "+e+t),this},attrs:function(e){return arguments.length!==1?this.attr.apply(this,arguments):e&&n(e,this.attr,this),this},t:function(t,n,r,i,s){return n||(n={}),n._tag=!0,n.invokeBody=r,i&&(n.dynamicAttributes=i),s&&e.extend(n,s),this.invokeHandler(t,n),this},c:function(e){var t=this.captureString(e);return{toString:function(){return t}}}};var f=a.prototype;return f.a=f.attrs,f.h=f.getFunction,f.i=f.renderTemplate,a});
define("raptor/templating",["raptor"],function(e,t,n,r){"use strict";var i=function(e){return $rget("rhtml",e)},s={},o=Array.isArray,u=e.createError,a=t("raptor/strings"),f=a.StringBuilder,l=t("raptor/xml/utils").escapeXml,c=t("raptor/xml/utils").escapeXmlAttr,h=t("raptor/templating/Context"),p,d,v=function(e,n,r){var i=t(e),s=i[n]||i.prototype&&i.prototype[n];if(!s)throw u(new Error('Helper function not found with name "'+n+'" in class "'+e+'"'));return s},m=function(e){var n=t(e),r;return n.process?r=n:(r=n.instance)||(r=n.instance=new n),r},g=function(e){return Array.isArray(e)===!0?e.length!==0:e};return p={templateFunc:function(e){var t=s[e];if(!t){t=i(e),!t&&this.findTemplate&&(this.findTemplate(e),t=i(e)),t&&(t=t(p.helpers));if(!t)throw u(new Error('Template not found with name "'+e+'"'));s[e]=t}return t},render:function(e,t,n){if(!n)throw u(new Error("Context is required"));var r=this.templateFunc(e);try{r(t||{},n)}catch(i){throw u(new Error('Unable to render template with name "'+e+'". Exception: '+i),i)}},renderToString:function(e,t,n){var r=new f;if(n===undefined)this.render(e,t,new h(r));else{var i=this;n.swapWriter(r,function(){i.render(e,t,n)})}return r.toString()},unload:function(e){delete s[e]},getFunction:function(e,t){return arguments.length===1?d[e]:v(e,t)},createContext:function(e){return new h(e||new f)},getHandler:m,helpers:{h:v,t:m,fv:function(e,t){if(!e)return;o(e)||(e=[e]);var n=0,r=e.length,i={getLength:function(){return r},isLast:function(){return n===r-1},isFirst:function(){return n===0},getIndex:function(){return n}};for(;n<r;n++){var s=e[n];t(s||"",i)}},f:e.forEach,fl:function(e,t){e!=null&&(o(e)||(e=[e]),t(e,0,e.length))},fp:function(e,t){if(!e)return;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},e:function(e){return!g(e)},ne:g,x:l,xa:c,nx:function(e){return{toString:function(){return e}}}}},d=p.helpers,p});