(function(){var e=this,t={},n=[],r=Array.prototype.slice,i=function(e){return e&&e.constructor===Array},s=function(e,t){e==null&&(e={});if(t!=null)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},o=function(e,t){return e?i(e)&&!t?e:t!=null?t<e.length?r.call(e,t):[]:r.call(e):[]},u=function(e){var t=n.length;for(var r=0;r<t;r++){var i=n[r];i(e)}return e.newInstance=function(e){return u({})},e};raptorBuilder={createRaptor:function(t){t||(t={});var n={global:e,getConfig:function(){return t},getModuleConfig:function(e){return this.getConfig()[e]||{}},defineCore:function(e,t){this[e]=t},extendCore:function(e,t){s(this[e],t)},toString:function(){return"[raptor]"},extend:s,forEachEntry:function(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],s=t.call(n,r,i);if(s===!1)return}},isArray:i,isString:function(e){return typeof e=="string"},isFunction:function(e){return typeof e=="function"},isObject:function(e){return typeof e=="object"},forEach:function(e,t,n){if(e==null)return;i(e)||(e=[e]);for(var r=0,s=e.length,o;r<s;r++)if(t.call(n,e[r],r,e)===!1)return},arrayFromArguments:o,keys:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}};return u(n),n}},$rload=function(t){n.push(t),e.raptor&&t(raptor)},$rcreate=function(e){raptor=raptorBuilder.createRaptor(e)},$rset=function(e,n,r){var i=t[e];i||(i=t[e]={}),i[n]=r},$radd=function(e,n){var r=t[e];r||(r=t[e]=[]),r.push(n)},$rget=function(e,n){var r=t[e];return arguments.length===2?r&&r[n]:r}})();
$rload(function(e){var t=function(){return!1},n={isDebugEnabled:t,isInfoEnabled:t,isWarnEnabled:t,isErrorEnabled:t,isFatalEnabled:t,dump:t,debug:t,info:t,warn:t,error:t,fatal:t,alert:t,trace:t};e.logging={logger:function(e){return n},makeLogger:function(t,r){e.extend(t,n)},voidLogger:n}});
$rload(function(e){e.errors={throwError:function(e,t){var n,r=arguments.length,i=Error;throw r===2?(n=e instanceof i?e:new i(e),n._cause=t):r===1&&(e instanceof i?n=e:n=new i(e)),n}},e.throwError=e.errors.throwError});
var $rdefs={};$rload(function(e){"use strict";var t=e.forEach,n=e.forEachEntry,r=e.isArray,i=e.isString,s=e.isFunction,o=e.logging,u="prototype",a="_count",f=0,l=1,c=2,h=3,p=4,d=5,v="_ordinal",m="__name",g=0,y=1,b=2,w=3,E=["class","module","enum","mixin"],S=$rdefs,x={},T,N,C=function(e,t,n){e[m]=t,e.__type=n},k=e.extend,L=function(e,t,n,r){var i,s;for(s in t)if(t.hasOwnProperty(s)){if(i=e[s]){if(r===!0)continue;n&&(n[s]=i)}e[s]=t[s]}},A=function(e,t,n){var r=e[u],s=function(){},o=i(t)?q(t):t;return k(e,o),s[u]=o[u],e.superclass=s[u],e[u]=new s,n&&k(e[u],r),r},O=function(e){var t;return function(){return t?t:t=o.logger(e)}},M=function(){return"["+this.__type+": "+this[m]+"]"},_=function(){return this[m]},D=function(){return"["+this[m]+"]"},P=function(){return W(this[m])},H=function(e){return this[e]},B=function(){return this[v]},j=function(){return this._name},F=function(e){return this[v]-e[v]},I=function(e,t,n){var r=e[t]=new n;return r[v]=e[a]++,r._name=t,r},q=function(e,t,n,r){if(t)return q("loader").require(e,t,n);var i=x[e];return i===undefined&&(i=T._load(e,1)),!i&&!r&&T._missing(e),i},R=function(i,o){var f,v,m,y=o[h],S,N=o[l],L,q,R=o[c],U=o[p],z=y==b,W=y==w,X,V;x[i]=N.exports,R?(s(R)&&(!W||N.singleton)?f=R(e):f=R,f||e.throwError(new Error("Invalid definition for "+i))):z?f=function(){}:e.throwError(new Error(i+" invalid")),v=q=f;if(!W){!z&&(s(f)||N.superclass)&&(y=g),S=E[y];if(y==g||z)s(f)||(v=f.init||function(){},v[u]=f),(L=N.superclass)&&A(v,L,!0),m=v[u],C(m,i,S),m.toString===Object[u].toString&&(m.toString=z?j:D),m.getClass=P,m.init=m.constructor=v,q=m;N.addins!==!1&&(C(v,i,S),v.getName=_,v.toString=M,q.logger=O(i))}return t(o[d],function(e){T.extend(q,e)},this),t(N.mixins,function(e){T.extend(q,e)},T),z&&(v[a]=0,r(U)?t(U,function(e){I(v,e,v)}):U&&(X=function(){},X[u]=m,n(U,function(e,t){V=I(v,e,X),v.apply(V,t||[])})),v.valueOf=H,k(m,{name:j,ordinal:B,compareTo:F})),v},U=function(e){var t=e[f],n;return x[t]||delete x[t],t?(n=S[t],S[t]=e,n&&(e[d]=n[d]),e):R("",e)},z=function(e,t){var n=0,r=e.length,s,o,u={},a;for(;n<r;n++)s=e[n],i(s)?o?u.superclass=s:o=s:n==r-1?a=s:u=s;return U([o,u,a,t])},W=function(e){return q(e,0,0,1)};e.oop=T={define:function(){return z(arguments,y)},defineClass:function(){return z(arguments,g)},defineEnum:function(e,t,n){return U([e,{},n,b,t])},defineMixin:function(){return z(arguments,w)},find:W,require:q,_load:function(t,n){var r=S[t],i;return(i=e[t])||(r?i=R(t,r):n&&T._find&&(i=T._find(t))),x[t]=i||null},extend:function(t,n,r,o){if(!n)return;var a,f,l;if(i(t)){a=S[t]||(S[t]=[t]),f=a[d],f?f.push(n):a[d]=[n],l=x[t];if(!l)return;s(l)?t=l[u]:t=l}return i(n)&&(n=q(n)),s(n)&&(o||(o={}),n=n.call(t,e,t,o)),r||o?(L(t,n,o,r),t):k(t,n)},inherit:A,_missing:function(e){throw new Error("Not found: "+e)},cache:x};for(N in T)N.charAt(0)!="_"&&(e[N]=T[N]);e.defineModule=T.define,e.define("raptor",e)});
$rcreate({});
raptor.define("widgets",function(e){"use strict";var t=function(e,t,n,r,i){this.type=t,this.id=e,this.nestedWidgetId=n,this.config=r,this.parent=i,this.children=[],i&&i.children.push(this)};return t.prototype={elId:function(e){return arguments.length===0?this.id:this.id+"-"+e}},{addWidget:function(n,r,i,s,o,u){r||(r=this._nextWidgetId(u));var a=new t(r,n,i,s,o);i&&(o||e.throwError(new Error("Widget with an assigned ID is not scoped within another widget.")),a.docId=o.id);if(!o){var f=u.attributes;f.widgets||(f.widgets=[]),f.widgets.push(a)}return a},hasWidgets:function(e){var t=e.attributes;return t.widgets&&t.widgets.length!==0},_nextDocId:function(e){var t=e.attributes;return t.nextDocId||(t.nextDocId=1),t.nextDocId++}}});
$rload(function(e){"use strict";var t=e.forEach,n=e.forEachEntry,r=e.arrayFromArguments,i=e.isArray,s=e.extend,o=0,u="__lstnrs",a=function(){},f,l=function(e,t){return e?t?function(){e.apply(t,arguments)}:e:a},c=function(e,n){var r=[],i;n.removed=!0,t(e._listeners,function(e){e!==n&&!e.removed&&r.push(e)}),e._listeners=r,(i=n.thisObj)&&delete i[u][n.id],e._listeners.length||e._onEmpty()},h=function(e,t){return function(){c(e,t)}},p=function(t){return function(r){if(!arguments.length)n(t,function(e,t){t.remove()});else{var i=t[r];i||e.errors.throwError(new Error("Invalid message name: "+r)),i.unsubscribe()}}},d=function(e,t){this.name=e,this.data=t};d.prototype={getName:function(){return this.name},getData:function(){return this.data}};var v=function(){this._listeners=[],this._onEmpty=a};v.prototype={add:function(e,t,n){var r={callback:e,thisObj:t,removed:!1,autoRemove:n,id:o++},i,s=this;s._listeners.push(r);var a={remove:h(s,r)};return a.unsubscribe=a.remove,t&&((i=t[u])||(i=t[u]={}),i[r.id]=a),a},publish:function(){var e=arguments,n=this;t(n._listeners,function(t){if(t.removed)return;t.callback.apply(t.thisObj,e),t.autoRemove&&c(n,t)})},onEmpty:function(e,t){this._onEmpty=l(e,t)}};var m=function(t,n){var r=n._allowed;if(r&&!r[t])throw new Error('Invalid message name of "'+t+'". Allowed messages: '+e.keys(r).join(", "))},g=function(e){return function(t){var n=[e].concat(r(arguments));this[typeof t=="function"?"subscribe":"publish"].apply(this,n)}},y=function(){this._byName={}};return y.prototype={__observable:!0,registerMessages:function(e,t){this._allowed||(this._allowed={});for(var n=0,r=e.length;n<r;n++){var i=e[n];this._allowed[i]=!0,t&&(this[i]=g(i))}},subscribe:function(e,t,r,i){var s=this,o,u;if(typeof e=="object")return i=r,r=t,o={},n(e,function(e,t){o[e]=s.subscribe(e,t,r,i)}),u={unsubscribe:p(o)},u.remove=u.removeAll=u.unsubscribe,u;m(e,s);var a=s._byName[e];return a||(s._byName[e]=a=new v,a.onEmpty(function(){delete s._byName[e]})),a.add(t,r,i)},publish:function(e,t){var n;i(t)?n=t:(f.isMessage(e)?(t=e,e=t.getName()):t=f.createMessage(e,t),n=[t.data,t]),m(e,this);var r=this,s=function(e){var t=r._byName[e];if(!t)return;t.publish.apply(t,n)};s(e),s("*");var o=e.lastIndexOf(".");return o>=0&&s(e.substring(0,o+1)+"*"),t}},e.listeners=f={Message:d,createListeners:function(){return new v},createObservable:function(e,t){var n=new y;return e&&n.registerMessages(e,t),n},makeObservable:function(e,t,n,r){t||(t=e),t._observable||(t._observable=!0,s(t,y.prototype)),y.call(e),n&&e.registerMessages(n,r)},isObervable:function(e){return e&&e.__observable},createMessage:function(e,t){return new d(e,t)},isMessage:function(e){return e instanceof d},bind:l,unsubscribeFromAll:function(e){var t=e[u];if(t)for(var n in t)t[n].unsubscribe()}}});
raptor.extend("widgets",function(e,t){"use strict";var n="prototype",r={},i=e.errors,s=e.listeners,o="events",u=e.require("widgets.Widget"),a=e.arrayFromArguments,f=0,l=function(e){this.widget=e,this.widgetsById={}};return l.prototype={addWidget:function(e,t){var n=this.widgetsById[t],r=this.widget,i;t.length>2&&t.substring(t.length-2)==="[]"&&(t=t.slice(0,-2),i=!0),n?n.push(e):this.widgetsById[t]=[e],i?(r[t]||(r[t]=[])).push(e):r[t]=e},getWidget:function(t){var n=this.widgetsById[t];if(!n||n.length===0)return undefined;if(n.length===1)return n[0];e.throwError(new Error('getWidget: Multiple widgets found with ID "'+t+'"'))},getWidgets:function(e){return this.widgetsById[e]||[]}},{_initAll:function(f){var c=this.logger(),h={},p=function(e,t,n){try{e.initWidget?e.initWidget(t):e.init(t)}catch(r){c.error('Unable to initialize widget of type "'+n+"'. Exception: "+r,r)}},d=function(e,t,n){e.onReady(function(){p(e,t,n)})},v=function(e,t){return this.publish(e,a(arguments,1))},m=function(a,f){if(!a)return;var h=0,g=a.length,y;for(;h<g;h++){var b=a[h],w=b[0],E=b[1],S=b[2],x=b[3],T=b[4]||{},N=b.slice(5);S===0&&(S=undefined),x===0&&(x=undefined),T===0&&(x=undefined),c.debug('Creating widget of type "'+w+'" ('+E+")");var C=e.find(w);C||i.throwError(new Error('Unable to initialize widget of type "'+w+'". The class for the widget was not found.'));if(C.initWidget)T.elId=E,y=C,y.onReady=t.onReady;else{var k=u._init,L;k[n]=L=C[n],L.init=C,L._isWidget||e.extend(L,u,!1),y=new k,s.makeObservable(y,L),L.notify||(L.notify=v,L.on=L.subscribe),y.registerMessages(["beforeDestroy","destroy"],!1);var A=L[o]||C[o];A&&y.registerMessages(A,!1),y._id=E,y._childId=x,r[E]=y,x&&S&&r[S]._doc.addWidget(y,x),y._doc=new l(y)}N&&N.length&&m(N,y),y.initBeforeOnDomReady===!0?p(y,T,w):d(y,T,w)}};m(f)},get:function(e){return r[e]},_nextWidgetId:function(){return"c"+f++}}}),raptor.global.$rwidgets=function(){"use strict";var e=raptor.require("widgets");e._initAll(raptor.arrayFromArguments(arguments))}
raptor.defineMixin("widgets.Widget",{singleton:!0},function(e){"use strict";var t=e.forEach,n=e.require("listeners"),r=function(e,i,s){var o={widget:e},u;e.publish("beforeDestroy",o),n.unsubscribeFromAll(e),e.__destroyed=!0,i&&(u=e.getRootEl(),u&&u.parentNode.removeChild(u)),s&&t(e.getChildren(),function(e){r(e,i&&!u,!0)}),e.publish("destroy",o)};return{_isWidget:!0,_init:function(){this._children=[],this._childrenById={}},getElId:function(e){return e?this._id+"-"+e:this._id},getRootElId:function(e){return this.getElId()},getEl:function(e){return document.getElementById(this.getElId(e))},getRootEl:function(){return this.getEl()},getWidget:function(e){var t=this._doc;return t?t.getWidget(e):null},getWidgets:function(e){var t=this._doc;return t?t.getWidgets(e):null},getChild:function(e){return this.getWidget(e)},getChildren:function(e){return this.getWidget(e)},getDoc:function(){return this._doc},getParent:function(){return this._parentWidget},getChildWidget:function(e){return this.getChild(e)},getChildWidgets:function(e){return this.getChildren.apply(this,arguments)},getParentWidget:function(){return this._parentWidget},destroy:function(e){r(this,!0,!0)},isDestroyed:function(){return this.__destroyed}}});
raptor.extend("widgets",function(e){"use strict";return{onReady:function(e,t){$(function(){e.call(t)})}}});
raptor.extend("widgets.Widget",function(e){"use strict";var t=/\#(\w+)( .*)?/g,n=e.global;return{$:function(e){var r=arguments;if(r.length===1){if(typeof e=="function"){var i=this;$(function(){e.apply(i,r)})}else if(typeof e=="string"){var s=t.exec(e);t.lastIndex=0;if(s!=null){var o=s[1];return s[2]==null?$(this.getEl(o)):$("#"+this.getElId(o)+s[2])}var u=this.getEl();if(!u)throw new Error("Root element is not defined for widget");if(u)return $(e,u)}}else if(r.length===2){if(typeof r[1]=="string")return $(e,this.getEl(r[1]))}else if(r.length===0)return $(this.getEl());return $.apply(n,arguments)},onReady:function(e){var t=this;$(function(){e.call(t,t)})}}});