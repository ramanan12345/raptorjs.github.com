raptor.define("widgets",function(e){"use strict";var t=function(e,t,n,r,i){this.type=t,this.id=e,this.nestedWidgetId=n,this.config=r,this.parent=i,this.children=[],i&&i.children.push(this)};return t.prototype={elId:function(e){return arguments.length===0?this.id:this.id+"-"+e}},{addWidget:function(n,r,i,s,o,u){r||(r=this._nextWidgetId(u));var a=new t(r,n,i,s,o);i&&(o||e.throwError(new Error("Widget with an assigned ID is not scoped within another widget.")),a.docId=o.id);if(!o){var f=u.attributes;f.widgets||(f.widgets=[]),f.widgets.push(a)}return a},hasWidgets:function(e){var t=e.attributes;return t.widgets&&t.widgets.length!==0},_nextDocId:function(e){var t=e.attributes;return t.nextDocId||(t.nextDocId=1),t.nextDocId++}}});
$rload(function(e){"use strict";var t=e.forEach,n=e.forEachEntry,r=e.arrayFromArguments,i=e.isArray,s=e.extend,o=0,u="__lstnrs",a=function(){},f,l=function(e,t){return e?t?function(){e.apply(t,arguments)}:e:a},c=function(e,n){var r=[],i;n.removed=!0,t(e._listeners,function(e){e!==n&&!e.removed&&r.push(e)}),e._listeners=r,(i=n.thisObj)&&delete i[u][n.id],e._listeners.length||e._onEmpty()},h=function(e,t){return function(){c(e,t)}},p=function(t){return function(r){if(!arguments.length)n(t,function(e,t){t.remove()});else{var i=t[r];i||e.errors.throwError(new Error("Invalid message name: "+r)),i.unsubscribe()}}},d=function(e,t){this.name=e,this.data=t};d.prototype={getName:function(){return this.name},getData:function(){return this.data}};var v=function(){this._listeners=[],this._onEmpty=a};v.prototype={add:function(e,t,n){var r={callback:e,thisObj:t,removed:!1,autoRemove:n,id:o++},i,s=this;s._listeners.push(r);var a={remove:h(s,r)};return a.unsubscribe=a.remove,t&&((i=t[u])||(i=t[u]={}),i[r.id]=a),a},publish:function(){var e=arguments,n=this;t(n._listeners,function(t){if(t.removed)return;t.callback.apply(t.thisObj,e),t.autoRemove&&c(n,t)})},onEmpty:function(e,t){this._onEmpty=l(e,t)}};var m=function(t,n){var r=n._allowed;if(r&&!r[t])throw new Error('Invalid message name of "'+t+'". Allowed messages: '+e.keys(r).join(", "))},g=function(e){return function(t){var n=[e].concat(r(arguments));this[typeof t=="function"?"subscribe":"publish"].apply(this,n)}},y=function(){this._byName={}};return y.prototype={__observable:!0,registerMessages:function(e,t){this._allowed||(this._allowed={});for(var n=0,r=e.length;n<r;n++){var i=e[n];this._allowed[i]=!0,t&&(this[i]=g(i))}},subscribe:function(e,t,r,i){var s=this,o,u;if(typeof e=="object")return i=r,r=t,o={},n(e,function(e,t){o[e]=s.subscribe(e,t,r,i)}),u={unsubscribe:p(o)},u.remove=u.removeAll=u.unsubscribe,u;m(e,s);var a=s._byName[e];return a||(s._byName[e]=a=new v,a.onEmpty(function(){delete s._byName[e]})),a.add(t,r,i)},publish:function(e,t){var n;i(t)?n=t:(f.isMessage(e)?(t=e,e=t.getName()):t=f.createMessage(e,t),n=[t.data,t]),m(e,this);var r=this,s=function(e){var t=r._byName[e];if(!t)return;t.publish.apply(t,n)};s(e),s("*");var o=e.lastIndexOf(".");return o>=0&&s(e.substring(0,o+1)+"*"),t}},e.listeners=f={Message:d,createListeners:function(){return new v},createObservable:function(e,t){var n=new y;return e&&n.registerMessages(e,t),n},makeObservable:function(e,t,n,r){t||(t=e),t._observable||(t._observable=!0,s(t,y.prototype)),y.call(e),n&&e.registerMessages(n,r)},isObervable:function(e){return e&&e.__observable},createMessage:function(e,t){return new d(e,t)},isMessage:function(e){return e instanceof d},bind:l,unsubscribeFromAll:function(e){var t=e[u];if(t)for(var n in t)t[n].unsubscribe()}}});
raptor.extend("widgets",function(e){"use strict";var t="prototype",n={},r=e.errors,i=e.listeners,s="events",o=e.require("widgets.Widget"),u=e.arrayFromArguments,a=0,f=function(e){this.widget=e,this.widgetsById={}};return f.prototype={addWidget:function(e,t){var n=this.widgetsById[t],r=this.widget,i;t.length>2&&t.substring(t.length-2)==="[]"&&(t=t.slice(0,-2),i=!0),n?n.push(e):this.widgetsById[t]=[e],i?(r[t]||(r[t]=[])).push(e):r[t]=e},getWidget:function(t){var n=this.widgetsById[t];if(!n||n.length===0)return undefined;if(n.length===1)return n[0];e.throwError(new Error('getWidget: Multiple widgets found with ID "'+t+'"'))},getWidgets:function(e){return this.widgetsById[e]||[]}},{_initAll:function(a){var l=this.logger(),c={},h=function(e,t,n){try{e.init(t)}catch(r){l.error('Unable to initialize widget of type "'+n+"'. Exception: "+r,r)}},p=function(e,t,n){e.onReady(function(){h(e,t,n)})},d=function(e,t){return this.publish(e,u(arguments,1))},v=function(u,a){if(!u)return;var c=0,m=u.length;for(;c<m;c++){var g=u[c],y=g[0],b=g[1],w=g[2],E=g[3],S=g[4]||{},x=g.slice(5);w===0&&(w=undefined),E===0&&(E=undefined),S===0&&(E=undefined),l.debug('Creating widget of type "'+y+'" ('+b+")");var T=e.find(y);T||r.throwError(new Error('Unable to initialize widget of type "'+y+'". The class for the widget was not found.'));var N=o._init,C;N[t]=C=T[t],C.init=T,C._isWidget||e.extend(C,o,!1);var k=new N;i.makeObservable(k,C),C.notify||(C.notify=d,C.on=C.subscribe),k.registerMessages(["beforeDestroy","destroy"],!1);var L=C[s]||T[s];L&&k.registerMessages(L,!1),k._id=b,k._childId=E,n[b]=k,E&&w&&n[w]._doc.addWidget(k,E),k._doc=new f(k),x&&x.length&&v(x,k),k.initBeforeOnDomReady===!0?h(k,S,y):p(k,S,y)}};v(a)},get:function(e){return n[e]},_nextWidgetId:function(){return"c"+a++}}}),raptor.global.$rwidgets=function(){"use strict";var e=raptor.require("widgets");e._initAll(raptor.arrayFromArguments(arguments))}
raptor.defineMixin("widgets.Widget",{singleton:!0},function(e){"use strict";var t=e.forEach,n=e.require("listeners"),r=function(e,i,s){var o={widget:e},u;e.publish("beforeDestroy",o),n.unsubscribeFromAll(e),e.__destroyed=!0,i&&(u=e.getRootEl(),u&&u.parentNode.removeChild(u)),s&&t(e.getChildren(),function(e){r(e,i&&!u,!0)}),e.publish("destroy",o)};return{_isWidget:!0,_init:function(){this._children=[],this._childrenById={}},getElId:function(e){return e?this._id+"-"+e:this._id},getRootElId:function(e){return this.getElId()},getEl:function(e){return document.getElementById(this.getElId(e))},getRootEl:function(){return this.getEl()},getWidget:function(e){var t=this._doc;return t?t.getWidget(e):null},getWidgets:function(e){var t=this._doc;return t?t.getWidgets(e):null},getChild:function(e){return this.getWidget(e)},getChildren:function(e){return this.getWidget(e)},getDoc:function(){return this._doc},getParent:function(){return this._parentWidget},getChildWidget:function(e){return this.getChild(e)},getChildWidgets:function(e){return this.getChildren.apply(this,arguments)},getParentWidget:function(){return this._parentWidget},destroy:function(e){r(this,!0,!0)},isDestroyed:function(){return this.__destroyed}}});
raptor.extend("widgets.Widget",function(e){"use strict";var t=/\#(\w+)( .*)?/g,n=e.global;return{$:function(e){var r=arguments;if(r.length===1){if(typeof e=="function"){var i=this;$(function(){e.apply(i,r)})}else if(typeof e=="string"){var s=t.exec(e);t.lastIndex=0;if(s!=null){var o=s[1];return s[2]==null?$(this.getEl(o)):$("#"+this.getElId(o)+s[2])}var u=this.getEl();if(!u)throw new Error("Root element is not defined for widget");if(u)return $(e,u)}}else if(r.length===2){if(typeof r[1]=="string")return $(e,this.getEl(r[1]))}else if(r.length===0)return $(this.getEl());return $.apply(n,arguments)},onReady:function(e){var t=this;$(function(){e.call(t,t)})}}});
raptor.define("components.buttons.Button.ButtonWidget",function(e){var t=function(e){var t=this;this.toggled=!1,this.jqueryButton=this.$(),this._toggle=e.toggle,e.toggled&&this.toggle(),this.$().click(function(){t.publish("click",{button:this}),t._toggle&&t.toggle()})};return t.events=["click","toggle"],t.prototype={toggle:function(){this.toggled=!this.toggled,this.jqueryButton.button("toggle"),this.publish("toggle",{button:this})}},t});
raptor.define("components.nav.Nav.NavWidget",function(e){var t=function(e){var t=this;this.$("LI").click(function(){t.publish("navItemClick",{el:this,nav:t})})};return t.events=["navItemClick"],t.prototype={},t});
(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))})(document,"script","twitter-wjs");