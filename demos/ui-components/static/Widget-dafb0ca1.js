define("raptor/widgets/Widget",["raptor"],function(e,t){"use strict";var n=t("raptor/listeners"),r=t("raptor/dom"),i=function(e,s,o){var u={widget:e},a=e.getEl(),f=t("raptor/widgets"),l=e._assignedId;e.publish("beforeDestroy",u),n.unsubscribeFromAll(e),e.__destroyed=!0;if(a){if(o){var c=function(e){r.forEachChildEl(e,function(e){if(e.id){var t=f.get(e.id);t&&i(t,!1,!1)}c(e)})};c(a)}s&&a.parentNode.removeChild(a)}f._remove(e._id);if(l){var h=f.get(e._scope);h&&h.getDoc()._remove(e,l)}e.publish("destroy",u)},s,o=function(){};return o.makeWidget=function(e,t){if(!e._isWidget)for(var n in s)t.hasOwnProperty(n)||(t[n]=s[n])},o.prototype=s={_isWidget:!0,getObservable:function(){return this._observable||(this._observable=n.createObservable())},registerMessages:function(e,t){this.getObservable().registerMessages.apply(this,arguments)},publish:function(n,r){var i=this.getObservable();i.publish.apply(i,arguments);var s;this._events&&(s=this._events[n])&&(s.props&&(r=e.extend(r||{},s.props)),t("raptor/pubsub").publish(s.target,r))},subscribe:function(e,t,n){var r=this.getObservable();return r.subscribe.apply(r,arguments)},getElId:function(e){return e?this._id+"-"+e:this._id},getEl:function(e){return document.getElementById(this.getElId(e))},getWidget:function(e){var t=this._doc;return t?t.getWidget(e):null},getWidgets:function(e){var t=this._doc;return t?t.getWidgets(e):null},getDoc:function(){return this._doc},destroy:function(e){e=e||{},i(this,e.removeNode!==!1,e.recursive!==!1)},isDestroyed:function(){return this.__destroyed},rerender:function(n,r){var i=this.renderer,s=this.constructor.getName(),o=t("raptor/component-renderer"),u=this.getEl();if(!u)throw e.createError(new Error("Root element missing for widget of type "+s));i||(this.constructor.render?i=this.constructor:s.endsWith("Widget")&&(i=t.find(s.slice(0,-6)+"Renderer")));if(!i)throw e.createError(new Error("Renderer not found for widget "+s));return o.render(i,n,r).replace(u)}},s.on=s.subscribe,o});