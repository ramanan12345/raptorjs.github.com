define("raptor/renderer/RenderResult",function(e){"use strict";var t=function(e){if(typeof e=="string"){var t=e;e=document.getElementById(t);if(!e)throw raptor.createError(new Error('Target element not found: "'+t+'"'))}return e},n=function(e,t){this.html=e,this.context=t,this._node=null};return n.prototype={getWidget:function(){if(!this.widgetDefs)throw new Error("Cannot call getWidget() until after HTML fragment is added to DOM.");return this.widgetDefs.length?this.widgetDefs[0].widget:undefined},_afterInsert:function(){var t=e.find("raptor/widgets");if(t){var n=t.getWidgetsContext(this.context);this.widgetDefs=n.widgets}var r=e.find("raptor/pubsub");return r&&r.publish("raptor/renderer/renderedToDOM",{node:this.getNode(),context:this.context}),this},_beforeRemove:function(t){var n=e.find("raptor/pubsub");n&&n.publish("dom/beforeRemove",{el:t})},appendTo:function(e){return t(e).appendChild(this.getNode()),this._afterInsert()},replace:function(e){return e=t(e),this._beforeRemove(e),e.parentNode.replaceChild(this.getNode(),e),this._afterInsert()},replaceChildrenOf:function(n){n=t(n);var r=e.find("raptor/pubsub");return r&&e("raptor/dom").forEachChildEl(n,function(e){this._beforeRemove(e)},this),n.innerHTML="",n.appendChild(this.getNode()),this._afterInsert()},insertBefore:function(e){return e=t(e),e.parentNode.insertBefore(this.getNode(),e),this._afterInsert()},insertAfter:function(e){e=t(e);var n=e.nextSibling,r=e.parentNode;return n?e.parentNode.insertBefore(this.getNode(),n):e.parentNode.appendChild(this.getNode()),this._afterInsert()},prependTo:function(e){return e=t(e),e.insertBefore(this.getNode(),e.firstChild||null),this._afterInsert()},getNode:function(){var e=this._node,t,n;if(!e){n=document.createElement("body"),n.innerHTML=this.html;if(n.childNodes.length==1)e=n.childNodes[0];else{e=document.createDocumentFragment();while(t=n.firstChild)e.appendChild(t)}this._node=e}return e}},n});