 <!doctype html> <html><head><title>RaptorJS: Optimizer</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="../static/optimizer-index-head-c07b8669.css" />
<link rel="stylesheet" type="text/css" href="../static/bootstrap-head-700d799c.css" />
<link rel="stylesheet" type="text/css" href="../static/code-editor-head-6a226e30.css" /><script type="text/javascript">var
_gaq=_gaq||[];_gaq.push(["_setAccount","UA-33982282-1"]);_gaq.push(["_trackPageview"]);(function(){var
a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var
b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script></head><body><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container"><a class="brand" href="/">RaptorJS</a><ul class="nav"><li class="divider-vertical"></li><li id="s0"><a href="/get-started/">Get Started</a></li><li class="divider-vertical"></li><li id="s1" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Learn<b class="caret"></b></a><ul class="dropdown-menu"><li id="s2"><a href="/">Overview</a></li><li id="s3"><a href="/get-started/">Get Started</a></li><li id="s4"><a href="/tutorial/">Tutorial</a></li><li id="s5"><a href="/api/">API Reference</a></li><li id="s6"><a href="/faq/">FAQ</a></li><li class="divider"></li><li id="s7"><a href="/modules-classes/">Modules and Classes</a></li><li id="s8"><a href="/packaging/">Packaging and Extensions</a></li><li id="s9" class="active nav-item-active"><a href="/optimizer/">Optimizer</a></li><li id="s10"><a href="/raptor-templates/">Raptor Templates</a></li><li id="s11"><a href="/widgets/">Widgets Framework</a></li><li id="s12"><a href="/logging/">Logging</a></li><li id="s13"><a href="/resource-search-path/">Resource Search Path</a></li><li id="s14"><a href="/cross-environment/">Cross Environment Support</a></li></ul></li><li class="divider-vertical"></li><li id="s15" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Community<b class="caret"></b></a><ul class="dropdown-menu"><li id="s16"><a href="https://github.com/raptorjs/raptorjs">Source code</a></li><li id="s17"><a href="https://github.com/raptorjs/raptorjs/issues">Issue Tracker</a></li><li id="s18"><a href="/contribute/">Contribute</a></li><li id="s19"><a href="/contributors/">Contributors</a></li><li class="divider"></li><li id="s20"><a href="http://groups.google.com/group/raptorjs">Discussion Forum</a></li><li class="divider"></li><li id="s21"><a href="http://twitter.com/raptorjs">Twitter (@raptorjs)</a></li><li id="s22"><a href="http://twitter.com/raptorjs">Google+</a></li></ul></li><li class="divider-vertical"></li><li id="s23" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">About<b class="caret"></b></a><ul class="dropdown-menu"><li id="s24"><a href="https://github.com/raptorjs/raptorjs/wiki/Release-Notes">Release Notes</a></li><li id="s25"><a href="/design-philosophy/">Design Philosophy</a></li><li id="s26"><a href="/license/">License</a></li><li id="s27"><a href="/credits/">Credits</a></li><li id="s28"><a href="/creators/">Creators</a></li></ul></li><li class="divider-vertical"></li></ul></div></div></div><div class="container"><div class="docs"><div class="bd"><div class="toc nav" id="docsNav"><ul class="toc"><li class="toc toc-level-0"><a href="#Overview">Overview</a><ul class="toc"><li class="toc toc-level-1"><a href="#Features_at_a_Glance">Features at a Glance</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Benefits">Benefits</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Page_Dependencies">Page Dependencies</a><ul class="toc"><li class="toc toc-level-1"><a href="#Declaring_Page_Dependencies">Declaring Page Dependencies</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Resource_Slots">Resource Slots</a><ul class="toc"><li class="toc toc-level-2"><a href="#Defining_Slots">Defining Slots</a><ul class="toc"></ul></li><li class="toc toc-level-2"><a href="#Targeting_Slots">Targeting Slots</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-1"><a href="#Injecting_Page_Dependencies">Injecting Page Dependencies</a><ul class="toc"><li class="toc toc-level-2"><a href="#Optimizer_Taglib">Optimizer Taglib</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-1"><a href="#Optional_Package_Extensions">Optional Package Extensions</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Compiled_Resources">Compiled Resources</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Configuration">Configuration</a><ul class="toc"><li class="toc toc-level-1"><a href="#Profiles">Profiles</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Bundling">Bundling</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Minification_and_Filters">Minification and Filters</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Output_Directories">Output Directories</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Asynchronous_Loading">Asynchronous Loading</a><ul class="toc"><li class="toc toc-level-1"><a href="#Asynchronous_Module_Includes">Asynchronous Module Includes</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Loading_Modules_Includes">Loading Modules Includes</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Building_Websites">Building Websites</a><ul class="toc"><li class="toc toc-level-1"><a href="#Static_Websites">Static Websites</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Serverbased_Websites">Server-based Websites</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#CDN_Integration">CDN Integration</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#JavaScript_API">JavaScript API</a><ul class="toc"><li class="toc toc-level-1"><a href="#Registering_Pages">Registering Pages</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Generating_Page_Includes">Generating Page Includes</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Dependency_Caching">Dependency Caching</a><ul class="toc"></ul></li></ul></li></ul></div><div class="docs-content"><h1 id="title">RaptorJS Optmizer</h1><div class="message message-warning"><div class="icon"><i class="icon-warning-sign" style="font-size: 30px;"></i></div><div class="bd">Documentation In-Progress</div></div><div class="section section-level-0"><h2 id="Overview">Overview</h2><div class="bd"><div class="section section-level-1"><h2 id="Features_at_a_Glance">Features at a Glance</h2><div class="bd"><ul><li><span class="popover-target" id="s29" title="Source code agnostic" data-content="Write code however you prefer with no restriction on which third-party libraries you choose to use">Source code agnostic</span> </li><li>Generates optimized resource bundles <i>and</i> the HTML markup to include them in web pages</li><li>Improves performance by reducing the number of HTTP requests through resource
bundling</li><li>Supports CDN integration <ul><li>Custom URL prefixes</li><li>Resource checksums included in URLs for optimal caching</li></ul></li><li>Works at build time or at request time</li><li>Driven by the <a href="/packaging/">RaptorJS Packaging</a> system <ul><li>Package everything using simple <code>package.json</code> files</li><li>Supports package extensions for targeted optimizations (target code for
specific browsers, devices,
etc.)</li><li>Supports any type of resource (LESS, Raptor Templates, etc.) with automatic
compilation</li></ul></li><li>Supports <span class="popover-target" id="s30" title="Optimized asynchronous module loading" data-content="For modules that may be downloaded asynchronously, the RaptorJS Optimizer generates the metadata containing the URLs that are required by the module to function. The asynchronous module loader uses this information to optimally download modules.">optimized asynchronous module loading</span> </li><li>Supports <span class="popover-target" id="s31" title="In-place Deployment" data-content="With in-place deployment enabled, URLs are generated such that they point to the original file on disk. Changes to files are reflected up instantly without having to monitor the file system for changes.">in-place deployment</span> for improved developer productivity</li><li>Easily configurable <ul><li>Supports profiles for targeting development and production</li><li>Configurable resource bundling</li> </ul></li><li>Supports custom filters for minification, pre/post-processing, etc.</li><li>Simple JavaScript API and command-line interface</li></ul></div></div><div class="section section-level-1"><h2 id="Benefits">Benefits</h2><div class="bd"><p>The RaptorJS optimizer simplifies the development of web applications by
relieving developers from worrying about and managing web page dependencies
(i.e. CSS and JavaScript resources). RaptorJS provides structure around
dependencies by allowing every module and UI component to declare its own
dependencies as part of a package. Each package provides enough information for
the RaptorJS optimizer to optimize the delivery of web pages with little to no
developer intervention. The web page developer only needs to tell the optimizer
which top-level modules, UI components and resources are required and the
optimizer will take care of the restâ€”including generating the static resource
bundles
<i>and</i> the HTML markup to include the required resources in an HTML page.</p><p>Unlike other optimizers, the RaptorJS optimizer is source-code agnostic. As a
developer, you can write your web application code however you prefer and still
benefit from the RaptorJS optimizer. Third-party libraries can easily be
utilized with no constraints, but you will most likely want to wrap the
third-party library with one or more
<span class="popover-target" id="s32" title="Packages" data-content="Only a package.json file needs to be created and added to your codebase. You will not need to change the code for the library.">RaptorJS packages</span> to make dependencies explicit.</p><p>RaptorJS is extensible and supports any type of resource as a dependency (in
addition to raw JavaScript and CSS resources). Out of the box, RaptorJS
supports compiled resources such as
<a href="/raptor-templates/">Raptor Templates</a> and <a href="http://lesscss.org/">LESS</a> as dependencies, but you can add support for your own compiled resources with
just a few lines of
code.</p><p>Optimizing an application by changing how resources are bundled or minified
does not require any changes to application code. The RaptorJS optimizer is
developer-friendly by supporting multiple profiles to easily enable and disable
optimization features such minification and
bundling.</p><p>Lastly, the RaptorJS optimizer is aware of "package extensions" which allow
pages to be optimized differently based on the target environment. This allows
developers to design web applications that adapt to the target client and only
send the code that is
required.</p></div></div></div></div><div class="section section-level-0"><h2 id="Page_Dependencies">Page Dependencies</h2><div class="bd"><p>Complex pages will often depend on a lot of JavaScript and CSS resources and
those dependencies often change over time. RaptorJS supports the concept of
<i>package everything</i>. This includes creating a package for a page that describes all of the
top-level dependencies for a page. The page package can add dependencies for
other module packages. The same package.json file is used to declare packages
for pages, modules, UI components,
etc.</p><div class="section section-level-1"><h2 id="Declaring_Page_Dependencies">Declaring Page Dependencies</h2><div class="bd"><p>The modules and resources that a page depends on should be declared in the
page's
<code>package.json</code> file. A sample <code>package.json</code> file is shown below:</p><div class="code-editor" id="s33"> <textarea id="s33-textarea" style="display: none;" name="code-0">{
    "includes": [
        {"module": "widgets"},
        {"module": "pubsub"},
        {"module": "components/buttons/Button"},
        "page.js",
        "page.css"
    ]
}</textarea></div><p>The above <code>package.json</code> file declares that a page depends on three modules (i.e., widgets, pubsub and
widgets). Each of those modules will have a
<code>package.json</code> files that describes the dependencies for each. The <code>package.json</code> file also declares that two resources should be sent to the browser (i.e.
"page.js" and page.css). A page's
<code>package.json</code> file provides enough information for the RaptorJS optimizer to be able to know
how to generate the resources are required for the page to function in a
browser. The next few sections describes how the required resources are
injected into a web
page.</p></div></div><div class="section section-level-1"><h2 id="Resource_Slots">Resource Slots</h2><div class="bd"><p>An HTML page that is sent to the browser will need to include <code>&lt;script></code> and <code>&lt;link></code> tags that link to the required resources for the page to function correctly.
The RaptorJS optimizer allows resources to be targeted for any location on a
page through the use of "slots". Slot markers can be added to an HTML page and
resources can be targeted for any available user-defined slot.
</p><p>For performance reasons, <code>&lt;link></code> tags for CSS resources are typically inserted into the <code>&lt;head></code> tag of a page (we'll call this the "head" slot) while <code>&lt;script></code> tags for JavaScript resources are typically inserted just before the closing <code>&lt;body></code> tag (we'll call this the "body" slot). By default, CSS resources are injected
into the "head" slot and JavaScript resources are injected into the "body"
slot. go into and developers can add as many slots as they would like to an
HTML
page.</p><div class="section section-level-2"><h2 id="Defining_Slots">Defining Slots</h2><div class="bd"><p>The JavaScript API for the RaptorJS provides a method for retrieving the HTML
markup for the slots on the page. You can use any templating language to inject
the content into your page.
</p><div class="code-editor" id="s34"> <textarea id="s34-textarea" style="display: none;" name="code-1">{
    "includes": [
        {"module": "widgets"},
        {"module": "pubsub"},
        {"module": "components/buttons/Button"},
        "page.js",
        "page.css"
    ]
}</textarea></div><p>If using Raptor Templates, an "optimizer" taglib is provided</p></div></div><div class="section section-level-2"><h2 id="Targeting_Slots">Targeting Slots</h2><div class="bd"><p>A developer can override which slot a resource should be targeted for by
specifying a "slot" attribute for a resource include as shown in the following
example:</p><div class="code-editor" id="s35"> <textarea id="s35-textarea" style="display: none;" name="code-2">{
    "includes": [
        { "path": "my-head.js", "slot": "head"}
        "my-head.css"
    ]
}</textarea></div></div></div></div></div><div class="section section-level-1"><h2 id="Injecting_Page_Dependencies">Injecting Page Dependencies</h2><div class="bd"><p></p><div class="section section-level-2"><h2 id="Optimizer_Taglib">Optimizer Taglib</h2><div class="bd"><p></p></div></div></div></div><div class="section section-level-1"><h2 id="Optional_Package_Extensions">Optional Package Extensions</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Compiled_Resources">Compiled Resources</h2><div class="bd"><p></p></div></div></div></div><div class="section section-level-0"><h2 id="Configuration">Configuration</h2><div class="bd"><p>The configuration for the RaptorJS optimizer is driven by a simple, but
powerful
<code>optimizer-config.xml</code> file that will typically be placed in the root of a project.</p><p>The optimizer configuration file supports profiles so that the page can be
optimized differently based on which profile is enabled. For example, to
improve developer productivity, bundling of resources and resource minification
can be
disabled.</p><div class="section section-level-1"><h2 id="Profiles">Profiles</h2><div class="bd"><p>The optimizer will combine resources based on a bundle configuration to reduce
the number of HTTP round-trips required to deliver a web page. The
Rapt</p></div></div><div class="section section-level-1"><h2 id="Bundling">Bundling</h2><div class="bd"><p>The optimizer will combine resources based on a bundle configuration to reduce
the number of HTTP round-trips required to deliver a web page. The
Rapt</p></div></div><div class="section section-level-1"><h2 id="Minification_and_Filters">Minification and Filters</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Output_Directories">Output Directories</h2><div class="bd"><p>The optimizer will combine resources based on a bundle configuration to reduce
the number of HTTP round-trips required to deliver a web page. The
Rapt</p></div></div></div></div><div class="section section-level-0"><h2 id="Asynchronous_Loading">Asynchronous Loading</h2><div class="bd"><p></p><div class="section section-level-1"><h2 id="Asynchronous_Module_Includes">Asynchronous Module Includes</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Loading_Modules_Includes">Loading Modules Includes</h2><div class="bd"><p></p></div></div></div></div><div class="section section-level-0"><h2 id="Building_Websites">Building Websites</h2><div class="bd"><p></p><div class="section section-level-1"><h2 id="Static_Websites">Static Websites</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Serverbased_Websites">Server-based Websites</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="CDN_Integration">CDN Integration</h2><div class="bd"><p></p></div></div></div></div><div class="section section-level-0"><h2 id="JavaScript_API">JavaScript API</h2><div class="bd"><p></p><div class="section section-level-1"><h2 id="Registering_Pages">Registering Pages</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Generating_Page_Includes">Generating Page Includes</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Dependency_Caching">Dependency Caching</h2><div class="bd"><p></p></div></div></div></div></div></div><div class="docs-footer"></div></div><div style="clear: both"></div><div class="footer footer-single-line"><div class="container"><div class="bd"><span class="powered-by">Powered by <a href="/" class="raptorjs">RaptorJS</a> </span> &nbsp; | &nbsp; <a href="/license/">License</a>&nbsp; | &nbsp; <a href="/credits/">Credits</a><span class="back-to-top"><a href="#title">Back to Top</a></span></div></div></div></div><script type="text/javascript" src="../static/core-body-81a10a80.js"></script>
<script type="text/javascript" src="../static/jquery-body-371da524.js"></script>
<script type="text/javascript" src="../static/widgets-body-658fce85.js"></script>
<script type="text/javascript" src="../static/optimizer-index-body-27a3f194.js"></script>
<script type="text/javascript" src="../static/bootstrap-body-34d7fcf3.js"></script>
<script type="text/javascript" src="../static/code-editor-body-51d8933a.js"></script><script type="text/javascript">$rwidgets(
["components.nav.Nav.NavItemWidget","s0",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1",0,0,0,0,
["components.nav.Nav.NavItemWidget","s2",0,0,0,0],
["components.nav.Nav.NavItemWidget","s3",0,0,0,0],
["components.nav.Nav.NavItemWidget","s4",0,0,0,0],
["components.nav.Nav.NavItemWidget","s5",0,0,0,0],
["components.nav.Nav.NavItemWidget","s6",0,0,0,0],
["components.nav.Nav.NavItemWidget","s7",0,0,0,0],
["components.nav.Nav.NavItemWidget","s8",0,0,0,0],
["components.nav.Nav.NavItemWidget","s9",0,0,0,0],
["components.nav.Nav.NavItemWidget","s10",0,0,0,0],
["components.nav.Nav.NavItemWidget","s11",0,0,0,0],
["components.nav.Nav.NavItemWidget","s12",0,0,0,0],
["components.nav.Nav.NavItemWidget","s13",0,0,0,0],
["components.nav.Nav.NavItemWidget","s14",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s15",0,0,0,0,
["components.nav.Nav.NavItemWidget","s16",0,0,0,0],
["components.nav.Nav.NavItemWidget","s17",0,0,0,0],
["components.nav.Nav.NavItemWidget","s18",0,0,0,0],
["components.nav.Nav.NavItemWidget","s19",0,0,0,0],
["components.nav.Nav.NavItemWidget","s20",0,0,0,0],
["components.nav.Nav.NavItemWidget","s21",0,0,0,0],
["components.nav.Nav.NavItemWidget","s22",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s23",0,0,0,0,
["components.nav.Nav.NavItemWidget","s24",0,0,0,0],
["components.nav.Nav.NavItemWidget","s25",0,0,0,0],
["components.nav.Nav.NavItemWidget","s26",0,0,0,0],
["components.nav.Nav.NavItemWidget","s27",0,0,0,0],
["components.nav.Nav.NavItemWidget","s28",0,0,0,0]],
["components.overlays.Popover.PopoverWidget","s29",0,0,{},0],
["components.overlays.Popover.PopoverWidget","s30",0,0,{},0],
["components.overlays.Popover.PopoverWidget","s31",0,0,{},0],
["components.overlays.Popover.PopoverWidget","s32",0,0,{},0],
["components.editors.CodeEditor.CodeEditorWidget","s33",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s34",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s35",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0]);</script></body></html>