 <!doctype html> <html><head><title>RaptorJS: Optimizer</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="../static/optimizer-index-head-b7accad8.css" />
<link rel="stylesheet" type="text/css" href="../static/bootstrap-head-700d799c.css" />
<link rel="stylesheet" type="text/css" href="../static/code-editor-head-6a226e30.css" /><script type="text/javascript">var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-33982282-1"]);_gaq.push(["_trackPageview"]);(function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script></head><body><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container"><a class="brand" href="/">RaptorJS</a><ul class="nav"><li class="divider-vertical"></li><li id="s0"><a href="/get-started/">Get Started</a></li><li class="divider-vertical"></li><li id="s1" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Learn<b class="caret"></b></a><ul class="dropdown-menu"><li id="s2"><a href="/">Overview</a></li><li id="s3"><a href="/get-started/">Get Started</a></li><li id="s4"><a href="/tutorial/">Tutorial</a></li><li id="s5"><a href="/api/">API Reference</a></li><li id="s6"><a href="/faq/">FAQ</a></li><li class="divider"></li><li id="s7"><a href="/modules-classes/">Modules and Classes</a></li><li id="s8"><a href="/packaging/">Packaging and Extensions</a></li><li id="s9" class="active nav-item-active"><a href="/optimizer/">Optimizer</a></li><li id="s10"><a href="/raptor-templates/">Raptor Templates</a></li><li id="s11"><a href="/widgets/">Widgets Framework</a></li><li id="s12"><a href="/logging/">Logging</a></li><li id="s13"><a href="/resource-search-path/">Resource Search Path</a></li><li id="s14"><a href="/cross-environment/">Cross Environment Support</a></li></ul></li><li class="divider-vertical"></li><li id="s15" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Community<b class="caret"></b></a><ul class="dropdown-menu"><li id="s16"><a href="https://github.com/raptorjs/raptorjs">Source code</a></li><li id="s17"><a href="https://github.com/raptorjs/raptorjs/issues">Issue Tracker</a></li><li id="s18"><a href="/contribute/">Contribute</a></li><li id="s19"><a href="/contributors/">Contributors</a></li><li class="divider"></li><li id="s20"><a href="http://groups.google.com/group/raptorjs">Discussion Forum</a></li><li class="divider"></li><li id="s21"><a href="http://twitter.com/raptorjs">Twitter (@raptorjs)</a></li><li id="s22"><a href="http://twitter.com/raptorjs">Google+</a></li></ul></li><li class="divider-vertical"></li><li id="s23" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">About<b class="caret"></b></a><ul class="dropdown-menu"><li id="s24"><a href="https://github.com/raptorjs/raptorjs/wiki/Release-Notes">Release Notes</a></li><li id="s25"><a href="/design-philosophy/">Design Philosophy</a></li><li id="s26"><a href="/license/">License</a></li><li id="s27"><a href="/credits/">Credits</a></li><li id="s28"><a href="/creators/">Creators</a></li></ul></li><li class="divider-vertical"></li></ul></div></div></div><div class="container"><div class="docs"><div class="bd"><div class="toc nav" id="docsNav"><ul class="toc"><li class="toc toc-level-0"><a href="#Overview">Overview</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Page_Dependencies">Page Dependencies</a><ul class="toc"><li class="toc toc-level-1"><a href="#Declaring_Page_Dependencies">Declaring Page Dependencies</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Resource_Slots">Resource Slots</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Injecting_Page_Dependencies">Injecting Page Dependencies</a><ul class="toc"><li class="toc toc-level-2"><a href="#Optimizer_Taglib">Optimizer Taglib</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-1"><a href="#Optional_Package_Extensions">Optional Package Extensions</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Compiled_Resources">Compiled Resources</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Configuration">Configuration</a><ul class="toc"><li class="toc toc-level-1"><a href="#Profiles">Profiles</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Bundling">Bundling</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Minification_and_Filters">Minification and Filters</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Output_Directories">Output Directories</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Asynchronous_Loading">Asynchronous Loading</a><ul class="toc"><li class="toc toc-level-1"><a href="#Asynchronous_Module_Includes">Asynchronous Module Includes</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Loading_Modules_Includes">Loading Modules Includes</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Building_Websites">Building Websites</a><ul class="toc"><li class="toc toc-level-1"><a href="#Static_Websites">Static Websites</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Serverbased_Websites">Server-based Websites</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#CDN_Integration">CDN Integration</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#JavaScript_API">JavaScript API</a><ul class="toc"><li class="toc toc-level-1"><a href="#Registering_Pages">Registering Pages</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Generating_Page_Includes">Generating Page Includes</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Dependency_Caching">Dependency Caching</a><ul class="toc"></ul></li></ul></li></ul></div><div class="docs-content"><h1 id="title">RaptorJS Optmizer</h1><div class="message message-warning"><div class="icon"><i class="icon-warning-sign" style="font-size: 30px;"></i></div><div class="bd">Documentation In-Progress</div></div><div class="section section-level-0"><h2 id="Overview">Overview</h2><div class="bd"><p>The RaptorJS Optimizer simplifies the development of web applications by relieving developers from worrying about managing a mess of constantly evolving <code>&lt;script></code> and <code>&lt;link></code> tags. When using RaptorJS, optimizing an application is taken care of automatically, but can be easily tuned without changing a single line of application code.</p><p>Instead of worrying about transitive dependencies, developers only need to declare which top-level modules and resources a page depends on and the optimizer will then use that information to resolve <i>all</i> dependencies. The optimizer will then generate static resource bundles and <i>also</i> the HTML markup that should be used to include the resources for a web page.</p></div></div><div class="section section-level-0"><h2 id="Page_Dependencies">Page Dependencies</h2><div class="bd"><p>Complex pages will often depend on a lot of JavaScript and CSS resources and those dependencies often change over time. RaptorJS supports the concept of <i>"package everything"</i>. This includes creating a package for a page that describes all of the top-level dependencies for a page. The page package can add dependencies for other module packages. The same package.json file is used to declare packages for pages, modules, UI components, etc.</p><div class="section section-level-1"><h2 id="Declaring_Page_Dependencies">Declaring Page Dependencies</h2><div class="bd"><p>The modules and resources that a page depends on should be declared in the page's <code>package.json</code> file. A sample <code>package.json</code> file is shown below:</p><div class="code-editor" id="s29"> <textarea id="s29-textarea" style="display: none;" name="code-0">{
    "includes": [
        {"module": "widgets"},
        {"module": "pubsub"},
        {"module": "components/buttons/Button"},
        "page.js",
        "page.css"
    ]
}</textarea></div><p>The above <code>package.json</code> file declares that a page depends on three modules (i.e., widgets, pubsub, widgets). Each of those modules will have a <code>package.json</code> files that describes the dependencies for each. The <code>package.json</code> file also declares that two resources should be sent to the browser (i.e. "page.js" and page.css). A page's <code>package.json</code> file provides enough information for the RaptorJS optimizer to be able to know how to generate the resources are required for the page to function in a browser. The next few sections describes how the required resources are injected into a webpage.</p></div></div><div class="section section-level-1"><h2 id="Resource_Slots">Resource Slots</h2><div class="bd"><p>An HTML page that is sent to the browser will need to include <code>&lt;script></code> and <code>&lt;link></code> tags that include the required resources for the page to function correctly. For performance reasons, <code>&lt;link></code> tags for CSS resources are typically inserted into the <code>&lt;head></code> tag of a page while <code>&lt;script></code> tags for JavaScript resources are typically inserted just before the closing <code>&lt;body></code> tag. This is the default strategy that RaptorJS uses as wellâ€”CSS resources are included in the "head" slot by default, while JavaScript resourcs are included in the "body" slot by default. A developer can override which slot a resource should go into and developers can add as many slots as they would like to an HTML page. </p></div></div><div class="section section-level-1"><h2 id="Injecting_Page_Dependencies">Injecting Page Dependencies</h2><div class="bd"><p></p><div class="section section-level-2"><h2 id="Optimizer_Taglib">Optimizer Taglib</h2><div class="bd"><p></p></div></div></div></div><div class="section section-level-1"><h2 id="Optional_Package_Extensions">Optional Package Extensions</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Compiled_Resources">Compiled Resources</h2><div class="bd"><p></p></div></div></div></div><div class="section section-level-0"><h2 id="Configuration">Configuration</h2><div class="bd"><p>The configuration for the RaptorJS optimizer is driven by a simple, but powerful <code>optimizer-config.xml</code> file that will typically be placed in the root of a project.</p><p>The optimizer configuration file supports profiles so that the page can be optimized differently based on which profile is enabled. For example, to improve developer productivity, bundling of resources and resource minification can be disabled.</p><div class="section section-level-1"><h2 id="Profiles">Profiles</h2><div class="bd"><p>The optimizer will combine resources based on a bundle configuration to reduce the number of HTTP round-trips required to deliver a web page. The Rapt</p></div></div><div class="section section-level-1"><h2 id="Bundling">Bundling</h2><div class="bd"><p>The optimizer will combine resources based on a bundle configuration to reduce the number of HTTP round-trips required to deliver a web page. The Rapt</p></div></div><div class="section section-level-1"><h2 id="Minification_and_Filters">Minification and Filters</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Output_Directories">Output Directories</h2><div class="bd"><p>The optimizer will combine resources based on a bundle configuration to reduce the number of HTTP round-trips required to deliver a web page. The Rapt</p></div></div></div></div><div class="section section-level-0"><h2 id="Asynchronous_Loading">Asynchronous Loading</h2><div class="bd"><p></p><div class="section section-level-1"><h2 id="Asynchronous_Module_Includes">Asynchronous Module Includes</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Loading_Modules_Includes">Loading Modules Includes</h2><div class="bd"><p></p></div></div></div></div><div class="section section-level-0"><h2 id="Building_Websites">Building Websites</h2><div class="bd"><p></p><div class="section section-level-1"><h2 id="Static_Websites">Static Websites</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Serverbased_Websites">Server-based Websites</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="CDN_Integration">CDN Integration</h2><div class="bd"><p></p></div></div></div></div><div class="section section-level-0"><h2 id="JavaScript_API">JavaScript API</h2><div class="bd"><p></p><div class="section section-level-1"><h2 id="Registering_Pages">Registering Pages</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Generating_Page_Includes">Generating Page Includes</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Dependency_Caching">Dependency Caching</h2><div class="bd"><p></p></div></div></div></div></div></div><div class="docs-footer"></div></div><div style="clear: both"></div><div class="footer footer-single-line"><div class="container"><div class="bd"><span class="powered-by">Powered by <a href="/" class="raptorjs">RaptorJS</a> </span> &nbsp; | &nbsp; <a href="/license/">License</a>&nbsp; | &nbsp; <a href="/credits/">Credits</a><span class="back-to-top"><a href="#title">Back to Top</a></span></div></div></div></div><script type="text/javascript" src="../static/core-body-81a10a80.js"></script>
<script type="text/javascript" src="../static/jquery-body-371da524.js"></script>
<script type="text/javascript" src="../static/widgets-body-658fce85.js"></script>
<script type="text/javascript" src="../static/bootstrap-body-34d7fcf3.js"></script>
<script type="text/javascript" src="../static/optimizer-index-body-58b39433.js"></script>
<script type="text/javascript" src="../static/code-editor-body-84f88cfb.js"></script><script type="text/javascript">$rwidgets(
["components.nav.Nav.NavItemWidget","s0",0,0,0,0],
["components.nav.Nav.NavItemWidget","s1",0,0,0,0,
["components.nav.Nav.NavItemWidget","s2",0,0,0,0],
["components.nav.Nav.NavItemWidget","s3",0,0,0,0],
["components.nav.Nav.NavItemWidget","s4",0,0,0,0],
["components.nav.Nav.NavItemWidget","s5",0,0,0,0],
["components.nav.Nav.NavItemWidget","s6",0,0,0,0],
["components.nav.Nav.NavItemWidget","s7",0,0,0,0],
["components.nav.Nav.NavItemWidget","s8",0,0,0,0],
["components.nav.Nav.NavItemWidget","s9",0,0,0,0],
["components.nav.Nav.NavItemWidget","s10",0,0,0,0],
["components.nav.Nav.NavItemWidget","s11",0,0,0,0],
["components.nav.Nav.NavItemWidget","s12",0,0,0,0],
["components.nav.Nav.NavItemWidget","s13",0,0,0,0],
["components.nav.Nav.NavItemWidget","s14",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s15",0,0,0,0,
["components.nav.Nav.NavItemWidget","s16",0,0,0,0],
["components.nav.Nav.NavItemWidget","s17",0,0,0,0],
["components.nav.Nav.NavItemWidget","s18",0,0,0,0],
["components.nav.Nav.NavItemWidget","s19",0,0,0,0],
["components.nav.Nav.NavItemWidget","s20",0,0,0,0],
["components.nav.Nav.NavItemWidget","s21",0,0,0,0],
["components.nav.Nav.NavItemWidget","s22",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s23",0,0,0,0,
["components.nav.Nav.NavItemWidget","s24",0,0,0,0],
["components.nav.Nav.NavItemWidget","s25",0,0,0,0],
["components.nav.Nav.NavItemWidget","s26",0,0,0,0],
["components.nav.Nav.NavItemWidget","s27",0,0,0,0],
["components.nav.Nav.NavItemWidget","s28",0,0,0,0]],
["components.editors.CodeEditor.CodeEditorWidget","s29",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0]);</script></body></html>