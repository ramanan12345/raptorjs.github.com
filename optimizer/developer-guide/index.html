<!DOCTYPE html><html><head><title>RaptorJS Optimizer: Developer Guide</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"></meta><link rel="stylesheet" type="text/css" href="../../static/optimizer-developer-guide-head-6ba2a270.css">
<link rel="stylesheet" type="text/css" href="../../static/bootstrap-head-d0572038.css">
<link rel="stylesheet" type="text/css" href="../../static/code-editor-head-6a226e30.css"><script type="text/javascript">var
_gaq=_gaq||[];_gaq.push(["_setAccount","UA-33982282-1"]);_gaq.push(["_trackPageview"]);(function(){var
a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var
b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script></head><body><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container"><a class="brand" href="../../">RaptorJS</a><ul class="nav"><li class="divider-vertical"></li><li id="s593"><a href="../../get-started/">Get Started</a></li><li class="divider-vertical"></li><li id="s594" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Learn<b class="caret"></b></a><ul class="dropdown-menu"><li id="s595"><a href="../../">Overview</a></li><li id="s596"><a href="../../get-started/">Get Started</a></li><li id="s597"><a href="../../tutorial/">Tutorial</a></li><li id="s598"><a href="../../api/">API Reference</a></li><li id="s599"><a href="../../faq/">FAQ</a></li><li class="divider"></li><li id="s600"><a href="../../modules-classes/">Modules and Classes</a></li><li id="s601"><a href="../../packaging/">Packaging and Extensions</a></li><li id="s602"><a href="../../module-loader/">Module Loader</a></li><li id="s603"><a href="../../optimizer/">Optimizer</a></li><li id="s604"><a href="../../raptor-templates/">Raptor Templates</a></li><li id="s605"><a href="../../widgets/">Widgets Framework</a></li><li id="s606"><a href="../../logging/">Logging</a></li><li id="s607"><a href="../../resource-search-path/">Resource Search Path</a></li><li id="s608"><a href="../../cross-environment/">Cross Environment Support</a></li></ul></li><li class="divider-vertical"></li><li id="s609" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Community<b class="caret"></b></a><ul class="dropdown-menu"><li id="s610"><a href="https://github.com/raptorjs/raptorjs">Source code</a></li><li id="s611"><a href="https://github.com/raptorjs/raptorjs/issues">Issue Tracker</a></li><li id="s612"><a href="../../contribute/">Contribute</a></li><li id="s613"><a href="../../contributors/">Contributors</a></li><li class="divider"></li><li id="s614"><a href="http://groups.google.com/group/raptorjs">Discussion Forum</a></li><li class="divider"></li><li id="s615"><a href="http://twitter.com/raptorjs">Twitter (@raptorjs)</a></li><li id="s616"><a href="http://twitter.com/raptorjs">Google+</a></li></ul></li><li class="divider-vertical"></li><li id="s617" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">About<b class="caret"></b></a><ul class="dropdown-menu"><li id="s618"><a href="https://github.com/raptorjs/raptorjs/wiki/Release-Notes">Release Notes</a></li><li id="s619"><a href="../../design-philosophy/">Design Philosophy</a></li><li id="s620"><a href="../../license/">License</a></li><li id="s621"><a href="../../credits/">Credits</a></li><li id="s622"><a href="../../creators/">Creators</a></li></ul></li><li class="divider-vertical"></li></ul></div></div></div><div class="container"><div class="docs"><div class="bd"><div class="toc nav" id="docsNav"><ul class="toc"><li class="toc toc-level-0"><a href="#Overview">Overview</a><ul class="toc"><li class="toc toc-level-1"><a href="#Features_at_a_Glance">Features at a Glance</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Benefits">Benefits</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Page_Dependencies">Page Dependencies</a><ul class="toc"><li class="toc toc-level-1"><a href="#Declaring_Page_Dependencies">Declaring Page Dependencies</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Resource_Slots">Resource Slots</a><ul class="toc"><li class="toc toc-level-2"><a href="#Defining_Slots">Defining Slots</a><ul class="toc"></ul></li><li class="toc toc-level-2"><a href="#Targeting_Slots">Targeting Slots</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-1"><a href="#Optional_Package_Extensions">Optional Package Extensions</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Compiled_Resources">Compiled Resources</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Configuration">Configuration</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Asynchronous_Loading">Asynchronous Loading</a><ul class="toc"><li class="toc toc-level-1"><a href="#Asynchronous_Module_Includes">Asynchronous Module Includes</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Asynchronous_Module_Metadata">Asynchronous Module Metadata</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#CDN_Integration">CDN Integration</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#JavaScriptAPI">JavaScript API</a><ul class="toc"><li class="toc toc-level-1"><a href="#Registering_Pages">Registering Pages</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Generating_Page_HTML">Generating Page HTML</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Dependency_Caching">Dependency Caching</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#OptimizerTaglib">Optimizer Taglib</a><ul class="toc"></ul></li></ul></div><div class="docs-content"><h1 id="title">RaptorJS Optmizer: Developer Guide</h1><div class="message message-warning"><div class="icon"><i class="icon-warning-sign" style="font-size: 30px;"></i></div><div class="bd">Documentation In-Progress</div></div><div class="section section-level-0"><h2 id="Overview">Overview</h2><div class="bd"><div class="section section-level-1"><h2 id="Features_at_a_Glance">Features at a Glance</h2><div class="bd"><ul><li><span class="popover-target" id="s623" title="Source code agnostic" data-content="Write code however you prefer with no restriction on which third-party libraries you choose to use">Source code agnostic</span> </li><li>Generates optimized resource bundles <i>and</i> the HTML markup to include them in web pages</li><li>Improves performance by reducing the number of HTTP requests through resource
bundling</li><li>Supports content distribution networks (CDNs) <ul><li>Custom URL prefixes</li><li>Resource checksums included in URLs for optimal caching</li></ul></li><li>Works at build time <i>or</i> at request time</li><li>Driven by the <a href="../../packaging/">RaptorJS Packaging</a> system <ul><li>Package everything using simple <code>package.json</code> files</li><li>Supports package extensions for targeted optimizations (target code for
specific browsers, devices,
etc.)</li><li>Supports any type of resource (LESS, Raptor Templates, etc.) with automatic
compilation</li></ul></li><li>Supports <span class="popover-target" id="s624" title="Optimized asynchronous module loading" data-content="For modules that may be downloaded asynchronously, the RaptorJS Optimizer generates the metadata containing the URLs that are required by the module to function. The asynchronous module loader uses this information to optimally download modules.">optimized asynchronous module loading</span> </li><li>Supports <span class="popover-target" id="s625" title="In-place Deployment" data-content="With in-place deployment enabled, URLs are generated such that they point to the original file on disk. Therefore, changes to files are reflected instantly without having to monitor the file system for changes.">in-place deployment</span> for improved developer productivity</li><li>Easily configurable <ul><li>Supports profiles for targeting development, production, etc.</li><li>Configurable resource bundling</li> </ul></li><li>Supports custom filters for minification, pre/post-processing, etc.</li><li>Simple JavaScript API</li><li>Custom <a href="../../raptor-templates/">Raptor Templates</a> taglib for the best usability</li></ul></div></div><div class="section section-level-1"><h2 id="Benefits">Benefits</h2><div class="bd"><p>The RaptorJS Optimizer simplifies the development of web applications by
relieving developers from worrying about and managing web page dependencies
(i.e. CSS and JavaScript resources). RaptorJS provides structure around
dependencies by allowing every module, page and UI component to declare its own
dependencies as part of a package. Each package provides enough information for
the RaptorJS Optimizer to optimize the delivery of web pages with little to no
developer intervention. The web page developer only needs to tell the optimizer
which top-level modules, UI components and resources are required for a page
and the optimizer will take care of the restâ€”including generating the static
resource bundles
<i>and</i> the HTML markup to include the required resources in an HTML page.</p><p>Unlike other optimizers, the RaptorJS Optimizer is source-code agnostic. As a
developer, you can write your web application code however you prefer and still
benefit from the RaptorJS Optimizer. Third-party libraries can easily be
utilized with no constraints, but you will most likely want to wrap the
third-party library with one or more
<span class="popover-target" id="s626" title="Packages" data-content="&amp;#10; Only a package.json file needs to be created and added to your codebase. &amp;#10; You will not need to change the code for the library.&amp;#10; ">RaptorJS packages</span> to make dependencies explicit.</p><p>RaptorJS is extensible and supports any type of resource as a dependency (in
addition to raw JavaScript and CSS resources). Out of the box, RaptorJS
supports compiled resources such as
<a href="../../raptor-templates/">Raptor Templates</a> and <a href="http://lesscss.org/">LESS</a> as dependencies (to name a few), but you can add support for your own compiled
resources with just a few lines of
code.</p><p>Optimizing an application by changing how resources are bundled or minified
does not require any changes to application code. The RaptorJS Optimizer is
developer-friendly by supporting multiple profiles to easily enable and disable
optimization features such minification and
bundling.</p><p>Lastly, the RaptorJS Optimizer is aware of <span class="popover-target" id="s627" title="Package Extensions" data-content="&amp;#10; Package extensions allow developers to define packages&amp;#10; that include dependencies that are only included&amp;#10; if a specified extension is enabled. Package&amp;#10; extensions allow for conditional dependencies.&amp;#10; ">package extensions</span> which allow pages to be optimized differently based on the target environment.
This allows developers to design web applications that adapt to the target
client and only send the code that is required. For more information on package
extensions please see
<a href="../../packaging/">Packaging and Extensions</a>.</p></div></div></div></div><div class="section section-level-0"><h2 id="Page_Dependencies">Page Dependencies</h2><div class="bd"><p>Complex pages will often depend on a lot of JavaScript and CSS resources and
those dependencies often change over time. RaptorJS supports the concept of
<i>package everything</i>. This includes creating a package for a page that describes all of the
top-level dependencies for a page. The page package can add dependencies for
other modules and UI components. The same package.json file is used to declare
packages for pages, modules, UI components,
etc.</p><div class="section section-level-1"><h2 id="Declaring_Page_Dependencies">Declaring Page Dependencies</h2><div class="bd"><p>The modules and resources that a page depends on should be declared in the
page's
<code>package.json</code> file. A sample <code>package.json</code> file is shown below:</p><div class="code-editor" id="s628"> <textarea id="s628-textarea" style="display: none;" name="code-18">{
    "includes": [
        {"module": "widgets"},
        {"module": "pubsub"},
        {"module": "components/buttons/Button"},
        "page.js",
        "page.css"
    ]
}</textarea></div><p>The above <code>package.json</code> file declares that a page depends on three modules (i.e., <i>widgets</i>, <i>pubsub</i> and <i>components/buttons/Button</i>). Each of those modules will have a <code>package.json</code> file that describe their dependencies. The above <code>package.json</code> file also declares that two resources should be sent to the browser (i.e.,
"page.js" and page.css). A page's
<code>package.json</code> file provides enough information for the RaptorJS Optimizer to be able to know
how to generate the optimized resources that are required for the page to
function in a browser. The next few sections describes how the required
resources are injected into a web page. For more information on declaring
RaptorJS packages, please see the documentation
<a href="../../packaging/">RaptorJS Packaging and Extensions</a>.</p><div class="message message-info"><div class="icon"><i class="icon-info-sign" style="font-size: 30px;"></i></div><div class="bd">NOTE: A page's package file does not need to be named "package.json". For
example, a page's package file could be named "index-package.json", if
desired.</div></div></div></div><div class="section section-level-1"><h2 id="Resource_Slots">Resource Slots</h2><div class="bd"><p>An HTML page that is sent to the browser will need to include <code>&lt;script></code> and <code>&lt;link></code> tags that link to the required resources for the page to function correctly.
The RaptorJS Optimizer allows resources to be targeted for any location on a
page through the use of "slots". Slot markers can be added to an HTML page and
resources can be targeted for any available user-defined slot.
</p><div class="section section-level-2"><h2 id="Defining_Slots">Defining Slots</h2><div class="bd"><p>The RaptorJS Optimizer provides a JavaScript API that includes a method for
retrieving the HTML markup for the slots on the page. You can then use your
favorite templating language to inject the HTML content into your
page.</p><p>For convenience, the RaptorJS Optimizer ships with an <a href="../../optimizer/taglib/">Optimizer Taglib </a> that can be used to define page dependencies and slots inside the HTML
template. The basic structure for a page to be optimized using Raptor Templates
is the
following:</p><div class="code-editor" id="s629"> <textarea id="s629-textarea" style="display: none;" name="code-19">&lt;c:template
    xmlns:c="core"
    xmlns:optimizer="optimizer">
 
    &lt;optimizer:page>
        &lt;includes>
            &lt;module name="module-a"/>
            &lt;module name="module-b"/>
            &lt;css path="test-page.css"/>
            &lt;css path="test-page.css"/>
            &lt;js path="test-page.js"/>
        &lt;/includes>
    &lt;/optimizer:page>
    
    &lt;html>
        &lt;head>
            &lt;title>Hello World&lt;/title>
            &lt;optimizer:slot name="head"/>
        &lt;/head>
        &lt;body>
            ...
            &lt;optimizer:slot name="body"/>
        &lt;/body>
    &lt;/html>
     
&lt;/c:template></textarea></div><p>For more information on the JavaScript API and Taglib please see the following
sections:</p><ul><li><a href="#JavaScriptAPI">JavaScript API</a></li><li><a href="#OptimizerTaglib">Optimizer Taglib</a></li></ul></div></div><div class="section section-level-2"><h2 id="Targeting_Slots">Targeting Slots</h2><div class="bd"><p>By default, CSS resources are targeted for a slot named "head" and JavaScript
resources are targeted for a slot named "body". Both of these defaults can
easily be overridden at the resource level by adding a "slot" property to the
resource include. For
example:</p><div class="code-editor" id="s630"> <textarea id="s630-textarea" style="display: none;" name="code-20">{
    "includes": [
        ...
        { "path": "my-library.js", "slot": "head" }
    ]
}</textarea></div><p>When optimizing the above package, the RaptorJS Optimizer will place
"my-library.js" into the "head" slot instead of the default "body"
slot.</p></div></div></div></div><div class="section section-level-1"><h2 id="Optional_Package_Extensions">Optional Package Extensions</h2><div class="bd"><p>When optimizing a page, the RaptorJS Optimizer allows a set of enabled
extensions to be passed in. When the optimizer encounters a package with
extensions it checks each extension to see if it is enabled. The JavaScript API
allows a set of enabled extensions to be passed in as an argument when
generating the optimized page. The Optimizer Taglib allows provides tags for
enabling and disabling
extensions.</p><p>For more information on the JavaScript API and Taglib please see the following
sections:</p><ul><li><a href="#JavaScriptAPI">JavaScript API</a></li><li><a href="#OptimizerTaglib">Optimizer Taglib</a></li></ul></div></div><div class="section section-level-1"><h2 id="Compiled_Resources">Compiled Resources</h2><div class="bd"><p>The RaptorJS Optimizer supports compiled resources such as LESS CSS files and
Raptor Template files. The RaptorJS optimizer relies on the
<a href="../../packaging/">RaptorJS Packaging and Extensions</a> systeming for compiling resource dependencies.</p><p>For more information on registering new types of compiled resources, please see <a href="../../packaging/#RegisteringIncludeTypes">RaptorJS Packaging and Extensions</a>.</p></div></div></div></div><div class="section section-level-0"><h2 id="Configuration">Configuration</h2><div class="bd"><p>The configuration for the RaptorJS Optimizer is driven by a simple, but
powerful XML
file.</p><p>The optimizer configuration file is typically placed in the root of the project
and given a filename of "optimizer-config.xml". The default RaptorJS Optimizer
instance can be configured using the the following JavaScript
code:</p><div class="code-editor" id="s631"> <textarea id="s631-textarea" style="display: none;" name="code-21">raptor.require('optimizer').configure('path/to/optimizer-config.xml', params);</textarea></div><p>The optimizer configuration file supports profiles so that the page can be
optimized differently based on which profile is enabled. For example, to
improve developer productivity, bundling of resources and resource minification
can be
disabled.</p><p>Below is a basic optimizer configuration file:</p><div class="code-editor" id="s632"> <textarea id="s632-textarea" style="display: none;" name="code-22">&lt;optimizer-config>

    &lt;minify-js>${minify}&lt;/minify-js>
    &lt;output-dir>static&lt;/output-dir>
    &lt;url-prefix>/static/&lt;/url-prefix>

    &lt;bundles name="default">

        &lt;bundle name="jquery">
            &lt;module name="jQuery" recursive="true"/>
        &lt;/bundle>

        &lt;bundle name="core">
            &lt;module name="core" recursive="true"/>
            &lt;init-raptor/>
            &lt;module name="listeners" recursive="true"/>
            &lt;module name="widgets" recursive="true"/>
        &lt;/bundle>
        
        &lt;bundle name="templating">
            &lt;module name="templating" recursive="true"/>
        &lt;/bundle>

    &lt;/bundles>
    
&lt;/optimizer-config></textarea></div> <p>The above sample configuration file only illustrates a small portion of the
supported configuration options. For a more detailed description of supported
configuration options please see the
<a href="../../optimizer/configuration/"><nobr>RaptorJS Optimizer: Configuration</nobr></a> documentation.</p></div></div><div class="section section-level-0"><h2 id="Asynchronous_Loading">Asynchronous Loading</h2><div class="bd"><p>The RaptorJS Optimizer is compatible with the asynchronous module loader
provided by RaptorJS. RaptorJS allows modules to be loaded asynchronously using
the following
code:</p><div class="code-editor" id="s633"> <textarea id="s633-textarea" style="display: none;" name="code-23">raptor.require("my-module", function(myModule) {
    //Do something with "my-module" now that it has loaded
});</textarea></div> <p>The RaptorJS asynchronous module loader relies on additional metadata being
sent to the browser to determine how to download modules asynchronously. This
metadata should include the resource URLs for each module, as well as any
dependencies on other modules. The RaptorJS Optimizer will generate this
information automatically for modules that are marked as "asynchronous".
</p><p>When the RaptorJS Optimizer encounters a module include marked as asynchronous
then it will not include the code for the module and, instead, the RaptorJS
Optimizer will include the metadata code that is required to download the
module
asynchronously.</p><div class="section section-level-1"><h2 id="Asynchronous_Module_Includes">Asynchronous Module Includes</h2><div class="bd"><p>A module include can be marked as asynchronous by setting an "async" property
to "true" for an include. For
example:</p><div class="code-editor" id="s634"> <textarea id="s634-textarea" style="display: none;" name="code-24">{
    "includes": [
        ...
        { "module": "my-module", "async": true }
        ...
    ]
}</textarea></div></div></div><div class="section section-level-1"><h2 id="Asynchronous_Module_Metadata">Asynchronous Module Metadata</h2><div class="bd"><p>For each module that is marked as asynchronous, the following information is
included as part of the metadata that is serialized to JSON and sent to the
client:</p><div class="code-editor" id="s635"> <textarea id="s635-textarea" style="display: none;" name="code-25">{
    "js": ["&lt;url-1>", "&lt;url-2>", ...],
    "css": ["&lt;url-1>", "&lt;url-2>", ...],
    "requires": ["&lt;module-1>", "&lt;module-2>"]
}</textarea></div><p>The following is example asynchronous module metadata:</p><div class="code-editor" id="s636"> <textarea id="s636-textarea" style="display: none;" name="code-26">{
    "my-module": {
        "js": ["/static/page1-async-body-d9103c2a.js"],
        "css": ["/static/page1-async-head-1929e414.css", 
                "/static/widgets-head-c17b7d9b.css"],
        "requires": ["another-module"]
    },

    "another-module": {
        "js": ["/static/util-body-f642f7bc.js"]
    }
}</textarea></div></div></div></div></div><div class="section section-level-0"><h2 id="CDN_Integration">CDN Integration</h2><div class="bd"><p>Utilizing a Content Distribution Network (CDN) is very straightforward when
using the RaptorJS Optimizer. Simply configure the URL prefix to include the
host name for the
CDN.</p><p>For example:</p><div class="code-editor" id="s637"> <textarea id="s637-textarea" style="display: none;" name="code-27">&lt;optimizer-config>
    ...
    &lt;url-prefix>http://my-cdn/static/&lt;/url-prefix>
    ...
&lt;/optimizer-config></textarea></div></div></div><div class="section section-level-0"><h2 id="JavaScriptAPI">JavaScript API</h2><div class="bd"><p>All of the code related to the RaptorJS Optimizer is part of the <a href="http://raptorjs.org/api/optimizer/">optimizer</a> module. The two most commonly used API methods are the following:</p><ul><li><b>configure</b>: The configure method is used to configure the default page optimizer instance.</li><li></li></ul><div class="section section-level-1"><h2 id="Registering_Pages">Registering Pages</h2><div class="bd"><p></p></div></div><div class="section section-level-1"><h2 id="Generating_Page_HTML">Generating Page HTML</h2><div class="bd"><p>The <code>OptimizerEngine</code> object provides a <code>optimizer.getPageHtmlBySlot()</code> method that can be used to generate the HTML for a page that has been
previously registered. The sample code below shows how to use the
<code>optimizer.getPageHtmlBySlot</code> method:</p><div class="code-editor" id="s638"> <textarea id="s638-textarea" style="display: none;" name="code-28">var optimizer = raptor.require('optimizer');

var optimizedPage = optimizer.optimizePage({
    name: 'my-page',
    packageFile: "/path/to/my-page-package.json"
});</textarea></div><p>After executing the above code, the value of <code>optimizedPage</code> would be similar the following JavaScript object (formatted as JSON): </p><div class="code-editor" id="s639"> <textarea id="s639-textarea" style="display: none;" name="code-29">{
    'body': '&lt;script type="text/javascript" src="/static/core-body-81a10a80.js">&lt;/script>\
             &lt;script type="text/javascript" src="/static/jquery-body-371da524.js">&lt;/script>\
             &lt;script type="text/javascript" src="/static/widgets-body-658fce85.js">&lt;/script>\
             &lt;script type="text/javascript" src="/static/my-page-body-27a3f194.js">&lt;/script>',
    'head': '&lt;link rel="stylesheet" type="text/css" href="/static/my-page-head-c07b8669.css">\
             &lt;link rel="stylesheet" type="text/css" href="/static/bootstrap-head-700d799c.css">'
}</textarea></div><p>For the above example, the files written to disk would be the following:</p><ul><b>/path/to/my/webapp/static/</b><ul><li>core-body-81a10a80.js</li><li>jquery-body-371da524.js</li><li>widgets-body-658fce85.js</li><li>my-page-body-27a3f194.js</li><li>my-page-head-c07b8669.css</li><li>bootstrap-head-700d799c.css</li></ul></ul></div></div><div class="section section-level-1"><h2 id="Dependency_Caching">Dependency Caching</h2><div class="bd"><p>The result of executing the <code>optimizer.optimizePage()</code> is <i>not</i> cached. Therefore, every time <code>optimizer.optimizePage()</code> is called, the optimized page bundles will be written to disk. If you plan on
optimizing pages at runtime (instead of at build time), you will want to cache
the result of the call to
<code>optimizer.optimizePage()</code>. The <a href="http://raptorjs.org/api/optimizer/">optimizer</a> module provides a simple cache that you can use to cache the results. The
cache is segregates optimized pages by the extensions that were enabled when a
particular page was optimized. Therefore, to get an instance of a cache you
will need to provide an
<a href="http://raptorjs.org/api/packager.ExtensionCollection/">ExtensionCollection</a> as the first argument. The complete sequence for caching an retrieving an
optimized page from the cache is shown below:
<div class="code-editor" id="s640"> <textarea id="s640-textarea" style="display: none;" name="code-30">var pageKey = ...; //Use a String value for the page that uniquely identifies it
var cache = pageOptimizer.getCache(enabledExtensions);
var optimizedPage = cache.getOptimizedPage(pageKey);
                
if (!optimizedPage) {
    //Generate the optimized page...
    optimizedPage = pageOptimizer.optimizePage({
        name: input.name,
        packageFile: packageFile,
        enabledExtensions: enabledExtensions
    });

    cache.addOptimizedPage(pageKey, optimizedPage);
}

return optimizedPage;</textarea></div></p></div></div></div></div><div class="section section-level-0"><h2 id="OptimizerTaglib">Optimizer Taglib</h2><div class="bd"><p>The RaptorJS Optimizer Taglib can be used in pages generated using Raptor
Templates to easily declare page dependencies and inject optimized HTML into
the appropriate page slots. Please see the
<a href="../../optimizer/taglib/">Optimizer Taglib Documentation</a> for more details on using the Optimizer Taglib in your application.</p></div></div></div></div><div class="docs-footer"></div></div><div style="clear: both"></div><div class="footer footer-single-line"><div class="container"><div class="bd"><span class="powered-by">Powered by <a href="../../" class="raptorjs">RaptorJS</a> </span> &nbsp; | &nbsp; <a href="../../license/">License</a>&nbsp; | &nbsp; <a href="../../credits/">Credits</a><span class="back-to-top"><a href="#title">Back to Top</a></span></div></div></div></div><script type="text/javascript" src="../../static/core-body-f1e2805e.js"></script>
<script type="text/javascript" src="../../static/jquery-body-371da524.js"></script>
<script type="text/javascript" src="../../static/widgets-body-06552a07.js"></script>
<script type="text/javascript" src="../../static/optimizer-developer-guide-body-27a3f194.js"></script>
<script type="text/javascript" src="../../static/bootstrap-body-34d7fcf3.js"></script>
<script type="text/javascript" src="../../static/code-editor-body-a2bab28c.js"></script><script type="text/javascript">$rwidgets(
["components.nav.Nav.NavItemWidget","s593",0,0,0,0],
["components.nav.Nav.NavItemWidget","s594",0,0,0,0,
["components.nav.Nav.NavItemWidget","s595",0,0,0,0],
["components.nav.Nav.NavItemWidget","s596",0,0,0,0],
["components.nav.Nav.NavItemWidget","s597",0,0,0,0],
["components.nav.Nav.NavItemWidget","s598",0,0,0,0],
["components.nav.Nav.NavItemWidget","s599",0,0,0,0],
["components.nav.Nav.NavItemWidget","s600",0,0,0,0],
["components.nav.Nav.NavItemWidget","s601",0,0,0,0],
["components.nav.Nav.NavItemWidget","s602",0,0,0,0],
["components.nav.Nav.NavItemWidget","s603",0,0,0,0],
["components.nav.Nav.NavItemWidget","s604",0,0,0,0],
["components.nav.Nav.NavItemWidget","s605",0,0,0,0],
["components.nav.Nav.NavItemWidget","s606",0,0,0,0],
["components.nav.Nav.NavItemWidget","s607",0,0,0,0],
["components.nav.Nav.NavItemWidget","s608",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s609",0,0,0,0,
["components.nav.Nav.NavItemWidget","s610",0,0,0,0],
["components.nav.Nav.NavItemWidget","s611",0,0,0,0],
["components.nav.Nav.NavItemWidget","s612",0,0,0,0],
["components.nav.Nav.NavItemWidget","s613",0,0,0,0],
["components.nav.Nav.NavItemWidget","s614",0,0,0,0],
["components.nav.Nav.NavItemWidget","s615",0,0,0,0],
["components.nav.Nav.NavItemWidget","s616",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s617",0,0,0,0,
["components.nav.Nav.NavItemWidget","s618",0,0,0,0],
["components.nav.Nav.NavItemWidget","s619",0,0,0,0],
["components.nav.Nav.NavItemWidget","s620",0,0,0,0],
["components.nav.Nav.NavItemWidget","s621",0,0,0,0],
["components.nav.Nav.NavItemWidget","s622",0,0,0,0]],
["components.overlays.Popover.PopoverWidget","s623",0,0,{},0],
["components.overlays.Popover.PopoverWidget","s624",0,0,{},0],
["components.overlays.Popover.PopoverWidget","s625",0,0,{},0],
["components.overlays.Popover.PopoverWidget","s626",0,0,{},0],
["components.overlays.Popover.PopoverWidget","s627",0,0,{},0],
["components.editors.CodeEditor.CodeEditorWidget","s628",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s629",0,0,{"mode":"xml","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s630",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s631",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s632",0,0,{"mode":"xml","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s633",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s634",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s635",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s636",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s637",0,0,{"mode":"xml","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s638",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s639",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s640",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0]);</script></body></html>