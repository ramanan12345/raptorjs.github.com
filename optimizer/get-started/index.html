 <!doctype html> <html><head><title>RaptorJS Optimizer: Get Started</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"></meta><link rel="stylesheet" type="text/css" href="../../static/optimizer-get-started-head-d2a7b186.css" />
<link rel="stylesheet" type="text/css" href="../../static/bootstrap-head-d0572038.css" />
<link rel="stylesheet" type="text/css" href="../../static/code-editor-head-6a226e30.css" /><script type="text/javascript">var
_gaq=_gaq||[];_gaq.push(["_setAccount","UA-33982282-1"]);_gaq.push(["_trackPageview"]);(function(){var
a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var
b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script></head><body><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container"><a class="brand" href="../../">RaptorJS</a><ul class="nav"><li class="divider-vertical"></li><li id="s440"><a href="../../get-started/">Get Started</a></li><li class="divider-vertical"></li><li id="s441" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Learn<b class="caret"></b></a><ul class="dropdown-menu"><li id="s442"><a href="../../">Overview</a></li><li id="s443"><a href="../../get-started/">Get Started</a></li><li id="s444"><a href="../../tutorial/">Tutorial</a></li><li id="s445"><a href="../../api/">API Reference</a></li><li id="s446"><a href="../../faq/">FAQ</a></li><li class="divider"></li><li id="s447"><a href="../../modules-classes/">Modules and Classes</a></li><li id="s448"><a href="../../packaging/">Packaging and Extensions</a></li><li id="s449"><a href="../../optimizer/">Optimizer</a></li><li id="s450"><a href="../../raptor-templates/">Raptor Templates</a></li><li id="s451"><a href="../../widgets/">Widgets Framework</a></li><li id="s452"><a href="../../logging/">Logging</a></li><li id="s453"><a href="../../resource-search-path/">Resource Search Path</a></li><li id="s454"><a href="../../cross-environment/">Cross Environment Support</a></li></ul></li><li class="divider-vertical"></li><li id="s455" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Community<b class="caret"></b></a><ul class="dropdown-menu"><li id="s456"><a href="https://github.com/raptorjs/raptorjs">Source code</a></li><li id="s457"><a href="https://github.com/raptorjs/raptorjs/issues">Issue Tracker</a></li><li id="s458"><a href="../../contribute/">Contribute</a></li><li id="s459"><a href="../../contributors/">Contributors</a></li><li class="divider"></li><li id="s460"><a href="http://groups.google.com/group/raptorjs">Discussion Forum</a></li><li class="divider"></li><li id="s461"><a href="http://twitter.com/raptorjs">Twitter (@raptorjs)</a></li><li id="s462"><a href="http://twitter.com/raptorjs">Google+</a></li></ul></li><li class="divider-vertical"></li><li id="s463" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">About<b class="caret"></b></a><ul class="dropdown-menu"><li id="s464"><a href="https://github.com/raptorjs/raptorjs/wiki/Release-Notes">Release Notes</a></li><li id="s465"><a href="../../design-philosophy/">Design Philosophy</a></li><li id="s466"><a href="../../license/">License</a></li><li id="s467"><a href="../../credits/">Credits</a></li><li id="s468"><a href="../../creators/">Creators</a></li></ul></li><li class="divider-vertical"></li></ul></div></div></div><div class="container"><div class="docs"><div class="bd"><div class="toc nav" id="docsNav"><ul class="toc"><li class="toc toc-level-0"><a href="#Overview">Overview</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Creating_a_Package">Creating a Package</a><ul class="toc"><li class="toc toc-level-1"><a href="#Directory_Structure">Directory Structure</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Package_Files">Package Files</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Resource_Slotting">Resource Slotting</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Describing_Page_Dependencies">Describing Page Dependencies</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Optimizing_a_Page">Optimizing a Page</a><ul class="toc"><li class="toc toc-level-1"><a href="#Example_Setup">Example Setup</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Configuring_the_Optimizer">Configuring the Optimizer</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Taglib">Optimizer Taglib</a><ul class="toc"></ul></li></ul></div><div class="docs-content"><h1 id="title">RaptorJS Optmizer: Get Started</h1><div class="message message-warning"><div class="icon"><i class="icon-warning-sign" style="font-size: 30px;"></i></div><div class="bd">Documentation In-Progress</div></div><div class="section section-level-0"><h2 id="Overview">Overview</h2><div class="bd"><p>Once you have <a href="../../get-started/">Node up-and-running</a>, you can then very quickly start using the RaptorJS to generate optimized
JavaScript and CSS bundles, as well as the HTML markup that is needed to
include those bundles in your web
page.</p><p>The RaptorJS Optimizer includes a simple JavaScript API for generating
optimized bundles and HTML markup. In addition, a custom taglib for
<a href="../../raptor-templates/">Raptor Templates</a> is provided to make it even easier to build optimized pages. This guide will
show you how to start using the JavaScript API and then provide details on
using the RaptorJS Optimizer Taglib so that you don't have to write any
JavaScript code to optimize your
pages.</p></div></div><div class="section section-level-0"><h2 id="Creating_a_Package">Creating a Package</h2><div class="bd"><p><img src="../../images/package.png" width="128" height="128" class="section-icon"> The first step to generating optimized web pages is to create packages for all
of your modules. A module is a collection of related resources that work
together to provide functionality in your application. Modules can consist of
resources of any type (JavaScript, CSS, LESS, Raptor Templates, etc.) and
modules can have dependencies on other modules. Packages are necessary so that
the optimizer will understand the dependencies in your application. A package
is defined using a simple
<code>package.json</code> file. The RaptorJS Optimizer utilizes the same format of package files
described in the documentation for the
<a href="../../packaging/">RaptorJS Packaging System</a>. The packaging format is quickly described in this guide, but for more
advanced usage please see the developer guide for the
<a href="../../packaging/">RaptorJS Packaging System</a>.</p> <div class="section section-level-1"><h2 id="Directory_Structure">Directory Structure</h2><div class="bd"><p>A <code>package.json</code> file should be placed in a directory that corresponds to a module name. For
example, the corresponding
<code>package.json</code> file for a module named "test.hello" should be placed in the following
location:
<code><nobr>&lt;modules-dir>/test/hello/package.json</nobr></code>. In order for the RaptorJS Optimizer to be able to find your modules, you need
to add the root directory containing your modules to the
<a href="../../resource-search-path/"><nobr>RaptorJS Resource Search Path</nobr></a> as shown in the following code:</p><div class="code-editor" id="s469"> <textarea id="s469-textarea" style="display: none;" name="code-24">raptor.require("resources").addSearchPathDir("/path/to/modules");</textarea></div></div></div><div class="section section-level-1"><h2 id="Package_Files">Package Files</h2><div class="bd"><p>At a minimum, a package needs to describe what is included in the package. This
is done by adding a "includes" property to a package.json file that is an array
of resources that should be included as part of the package. A simple
<code>package.json</code> is shown below:</p><div class="code-editor" id="s470"> <textarea id="s470-textarea" style="display: none;" name="code-25">{
    "includes": [
        "my-widget.js",
        "my-css-stylesheet.css",
        "my-less-stylesheet.less",
        "my-template.rhtml"
    ]
}</textarea></div><p>The above <code>package.json</code> file includes four resources. The RaptorJS Packaging System is flexible enough
to support any type of resource, including resources that need to be compiled
into either JavaScript or CSS (such as
<a href="http://lesscss.org">LESS</a> CSS and <a href="../../raptor-templates/">Raptor Template</a> files). Resource paths that are not prefixed with a forward slash ("/") are
treated as paths relative to the location of the
<code>package.json</code> file. Paths that are prefixed with a forward slash are treated as relative to
at least one of the resource search path entries defined for your
application.</p><p>In addition to declaring which resources are included as part of a package, a <code>package.json</code> file can also declare that it depends on another module (i.e., another <code>package.json</code> file). A module dependency can be added using adding <code>{ "module": "&lt;module-name>" }</code> entries as shown in the following example:</p><div class="code-editor" id="s471"> <textarea id="s471-textarea" style="display: none;" name="code-26">{
    "includes": [
        { "module": "widgets" },
        { "module": "templating" },
        "my-widget.js",
        "my-css-stylesheet.css",
        "my-less-stylesheet.less",
        "my-template.rhtml"
    ]
}</textarea></div></div></div><div class="section section-level-1"><h2 id="Resource_Slotting">Resource Slotting</h2><div class="bd"><p>The RaptorJS Optimizer allows resources to be targeted to specific locations on
HTML page by assigning "slot" names to resource includes. A slot is just unique
name that should correspond to a location on an HTML page. An application can
make use of as many resource slots that it needs. By default, all CSS resources
will be targeted for a slot named "head" and all JavaScript resources will be
targeted for a slot named "body". The following example illustrates how to
retarget a resource for a custom slot for a resource included inside a
<code>package.json</code> file:</p><div class="code-editor" id="s472"> <textarea id="s472-textarea" style="display: none;" name="code-27">{
    "includes": [
        ...
        { "path": "my-widget.js", "slot": "my-custom-slot" }
        ...
    ]
}</textarea></div></div></div></div></div><div class="section section-level-0"><h2 id="Describing_Page_Dependencies">Describing Page Dependencies</h2><div class="bd"><p><img src="../../images/page-dependencies.png" width="128" height="128" class="section-icon"> The RaptorJS optimizer describes a few options for declaring page
dependencies. You can choose to create
<code>package.json</code> files for your pages to describe the dependencies for each page. Another
option, that is described later, is to inline page dependencies in Raptor
Template files using the
<a href="#Taglib">Optimizer Taglib</a>).</p> <p>A <code>package.json</code> for page is no different from a <code>package.json</code> file for a module. A page's <code>package.json</code> file can be placed in any location that is convenient for your application.
Once you have created a
<code>package.json</code> for your page you are now ready to optimize your page as described in the next
section.</p></div></div><div class="section section-level-0"><h2 id="Optimizing_a_Page">Optimizing a Page</h2><div class="bd"><p><img src="../../images/optimized-delivery.png" width="128" height="128" class="section-icon"> The RaptorJS Optimizer provides a simple JavaScript API. The default
configuration will write all bundles to a "static" directory in the current
working directory for the running process. In addition, the default
configuration will use "/static/" as the URL prefix for all resource URLs. In
addition, by default, no minification or other filters are applied to
JavaScript and CSS code. Lastly, the default configuration configures no
bundles so all resources of the same content type (i.e., either CSS or
JavaScript) targeted for the same slot will be bundled
together.</p> <div class="section section-level-1"><h2 id="Example_Setup">Example Setup</h2><div class="bd">As an example will use the following directory structure: <ul><li><b>/path/to/my-app/</b><ul><li><b>modules/</b><ul><li><b>module-a/</b><ul><li>package.json</li><li>module-a.js</li><li>module-a.css</li></ul></li><li><b>module-b/</b><ul><li>package.json</li><li>module-b.js</li><li>module-b.css</li></ul></li></ul></li><li><b>pages/</b><ul><li><b>test-page/</b><ul><li>package.json</li><li>test-page.js</li><li>test-page.css</li></ul></li></ul></li></ul></li></ul></div></div></div></div><div class="section section-level-0"><h2 id="Configuring_the_Optimizer">Configuring the Optimizer</h2><div class="bd"><p></p> </div></div><div class="section section-level-0"><h2 id="Taglib">Optimizer Taglib</h2><div class="bd"><p></p> </div></div></div></div><div class="docs-footer"></div></div><div style="clear: both"></div><div class="footer footer-single-line"><div class="container"><div class="bd"><span class="powered-by">Powered by <a href="../../" class="raptorjs">RaptorJS</a> </span> &nbsp; | &nbsp; <a href="../../license/">License</a>&nbsp; | &nbsp; <a href="../../credits/">Credits</a><span class="back-to-top"><a href="#title">Back to Top</a></span></div></div></div></div><script type="text/javascript" src="../../static/core-body-fb755d4b.js"></script>
<script type="text/javascript" src="../../static/jquery-body-371da524.js"></script>
<script type="text/javascript" src="../../static/widgets-body-06552a07.js"></script>
<script type="text/javascript" src="../../static/optimizer-get-started-body-27a3f194.js"></script>
<script type="text/javascript" src="../../static/bootstrap-body-34d7fcf3.js"></script>
<script type="text/javascript" src="../../static/code-editor-body-a2bab28c.js"></script><script type="text/javascript">$rwidgets(
["components.nav.Nav.NavItemWidget","s440",0,0,0,0],
["components.nav.Nav.NavItemWidget","s441",0,0,0,0,
["components.nav.Nav.NavItemWidget","s442",0,0,0,0],
["components.nav.Nav.NavItemWidget","s443",0,0,0,0],
["components.nav.Nav.NavItemWidget","s444",0,0,0,0],
["components.nav.Nav.NavItemWidget","s445",0,0,0,0],
["components.nav.Nav.NavItemWidget","s446",0,0,0,0],
["components.nav.Nav.NavItemWidget","s447",0,0,0,0],
["components.nav.Nav.NavItemWidget","s448",0,0,0,0],
["components.nav.Nav.NavItemWidget","s449",0,0,0,0],
["components.nav.Nav.NavItemWidget","s450",0,0,0,0],
["components.nav.Nav.NavItemWidget","s451",0,0,0,0],
["components.nav.Nav.NavItemWidget","s452",0,0,0,0],
["components.nav.Nav.NavItemWidget","s453",0,0,0,0],
["components.nav.Nav.NavItemWidget","s454",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s455",0,0,0,0,
["components.nav.Nav.NavItemWidget","s456",0,0,0,0],
["components.nav.Nav.NavItemWidget","s457",0,0,0,0],
["components.nav.Nav.NavItemWidget","s458",0,0,0,0],
["components.nav.Nav.NavItemWidget","s459",0,0,0,0],
["components.nav.Nav.NavItemWidget","s460",0,0,0,0],
["components.nav.Nav.NavItemWidget","s461",0,0,0,0],
["components.nav.Nav.NavItemWidget","s462",0,0,0,0]],
["components.nav.Nav.NavItemWidget","s463",0,0,0,0,
["components.nav.Nav.NavItemWidget","s464",0,0,0,0],
["components.nav.Nav.NavItemWidget","s465",0,0,0,0],
["components.nav.Nav.NavItemWidget","s466",0,0,0,0],
["components.nav.Nav.NavItemWidget","s467",0,0,0,0],
["components.nav.Nav.NavItemWidget","s468",0,0,0,0]],
["components.editors.CodeEditor.CodeEditorWidget","s469",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s470",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s471",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0],
["components.editors.CodeEditor.CodeEditorWidget","s472",0,0,{"mode":"javascript","autoResize":true,"readOnly":true},0]);</script></body></html>