<!DOCTYPE html><html><head><title itemprop="name">RaptorJS Optimizer: Get Started using the Optimizer Taglib for Raptor Templates</title><link rel="icon" href="../../favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="../../static/optimizer-get-started-raptor-templates-091b9ba1.css">
<link rel="stylesheet" type="text/css" href="../../static/docs-4a51d478.css">
<link rel="stylesheet" type="text/css" href="../../static/code-editor-f1386401.css">
<script type="text/javascript">var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-33982282-1"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
var __insp=__insp||[];__insp.push(["wid",2568045892]),function(){function e(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.id="inspsync",e.src=("https:"==document.location.protocol?"https":"http")+"://www.inspectlet.com/inspectlet-jq.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1)}();</script></head><body><div class="navbar navbar-fixed-top"><div class="navbar-inner"><div class="container"><a class="brand" href="../../">RaptorJS</a><ul class="nav"><li class="divider-vertical"></li><li id="w788"><a href="../../get-started/">Get Started</a></li><li class="divider-vertical"></li><li id="w789" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Learn<b class="caret"></b></a><ul class="dropdown-menu"><li id="w790"><a href="../../">Overview</a></li><li id="w791"><a href="../../get-started/">Get Started</a></li><li id="w792"><a href="../../tutorial/">Tutorial</a></li><li id="w793"><a href="../../api/">API Reference</a></li><li id="w794" target="_blank"><a href="https://github.com/raptorjs/samples">Sample Apps</a></li><li id="w795"><a href="../../faq/">FAQ</a></li><li class="divider"></li><li id="w796"><a href="../../modules-classes/">Modules and Classes</a></li><li id="w797"><a href="../../packaging/">Packaging and Extensions</a></li><li id="w798"><a href="../../module-loader/">Module Loader</a></li><li id="w799"><a href="../../optimizer/">Optimizer</a></li><li id="w800"><a href="../../raptor-templates/">Raptor Templates</a></li><li id="w801"><a href="../../widgets/">Widget Framework</a></li><li class="divider"></li><li id="w802"><a href="../../ui-components/">Building UI Components</a></li><li id="w803"><a href="../../logging/">Logging</a></li><li id="w804"><a href="../../resource-search-path/">Resource Search Path</a></li><li id="w805"><a href="../../cross-environment/">Cross Environment Support</a></li></ul></li><li class="divider-vertical"></li><li id="w806" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">Community<b class="caret"></b></a><ul class="dropdown-menu"><li id="w807"><a href="https://github.com/raptorjs/raptorjs">Source code</a></li><li id="w808"><a href="https://github.com/raptorjs/raptorjs/issues">Issue Tracker</a></li><li id="w809"><a href="../../contribute/">Contribute</a></li><li id="w810"><a href="../../contributors/">Contributors</a></li><li class="divider"></li><li id="w811"><a href="http://groups.google.com/group/raptorjs">Discussion Forum</a></li><li class="divider"></li><li id="w812"><a href="http://twitter.com/raptorjs">Twitter (@raptorjs)</a></li><li id="w813"><a href="https://plus.google.com/111493691067944627473/">Google+</a></li></ul></li><li class="divider-vertical"></li><li id="w814" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle">About<b class="caret"></b></a><ul class="dropdown-menu"><li id="w815"><a href="https://github.com/raptorjs/raptorjs/wiki/Release-Notes">Release Notes</a></li><li id="w816"><a href="../../design-philosophy/">Design Philosophy</a></li><li id="w817"><a href="../../license/">License</a></li><li id="w818"><a href="../../credits/">Credits</a></li><li id="w819"><a href="../../creators/">Creators</a></li></ul></li><li class="divider-vertical"></li></ul></div></div></div><div class="container"><div class="docs"><div class="bd"><div class="docs-content"><h1 id="title">RaptorJS Optmizer: Get Started with the Optimizer Taglib</h1><div class="toc nav" id="docsNav"><ul class="toc"><li class="toc toc-level-0"><a href="#Overview">Overview</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Sample_Code">Sample Code</a><ul class="toc"></ul></li><li class="toc toc-level-0"><a href="#Creating_a_Package">Creating a Package</a><ul class="toc"><li class="toc toc-level-1"><a href="#Module_Directories">Module Directories</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Package_File_Format">Package File Format</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Optimizing_a_Page_using_the_Optimizer_Taglib">Optimizing a Page using the Optimizer Taglib</a><ul class="toc"><li class="toc toc-level-1"><a href="#Example_Setup">Example Setup</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Page_Template">Page Template</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#Rendering_and_Optimizing_the_Page">Rendering and Optimizing the Page</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Configuring_the_Optimizer">Configuring the Optimizer</a><ul class="toc"><li class="toc toc-level-1"><a href="#Loading_a_Configuration">Loading a Configuration</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#XML_Configuration_File">XML Configuration File</a><ul class="toc"></ul></li><li class="toc toc-level-1"><a href="#variables">XML Configuration Variables</a><ul class="toc"></ul></li></ul></li><li class="toc toc-level-0"><a href="#Discussion">Discussion</a><ul class="toc"></ul></li></ul><div class="docs-nav-footer"><ul><li><span class="powered-by">Powered by <a href="../../" class="raptorjs">RaptorJS</a></span></li><li><a href="../../license/">License</a></li><li><a href="../../credits/">Credits</a></li></ul></div></div><div class="message message-warning"><div class="icon"><i class="icon-warning-sign" style="font-size: 30px;"></i></div><div class="bd">Documentation In-Progress</div></div><div class="section section-level-0"><h2 id="Overview">Overview</h2><div class="bd"><p>Once you have <a href="../../get-started/">Node up-and-running</a>, you can then very quickly start using the RaptorJS Optimizer to generate
optimized JavaScript and CSS bundles, as well as the HTML markup that is needed
to include those bundles in your web pages. RaptorJS comes bundled with a
<code><nobr>raptor-optimizer</nobr></code> executable file that can be used to optimize applications from the command
line. In order for this executable to be made availably globally on your
system, you will need to install the "raptor" module globally using the
following
command:</p><pre class="sh">$ npm install raptor --global</pre><div class="message message-info"><div class="icon"><i class="icon-info-sign" style="font-size: 30px;"></i></div><div class="bd"><p>NOTE: You will need to give administrative rights when installing a Node
package globally so typically the above command will be used with the
<code>sudo</code> command:</p><pre class="sh">$ sudo npm install raptor --global</pre></div></div><p>RaptorJS also includes a simple <a href="../../optimizer/get-started-javascript-api/">JavaScript API for the RaptorJS Optimizer</a> as well as an <a href="../../optimizer/get-started-raptor-templates/">Optimizer Taglib</a> (for use with <a href="../../raptor-templates/">Raptor Templates</a>). The JavaScript API gives developers full control over the optimization
process, while the Optimizer Taglib allows page dependencies to be inlined into
the page template. When using the RaptorJS Optimizer Taglib you will not have
to write any JavaScript code to optimize your
pages.</p></div></div><div class="section section-level-0"><h2 id="Sample_Code">Sample Code</h2><div class="bd"><p>The sample code for this guide can be downloaded using the following link: <a href="../../sample-projects/optimizer-get-started-raptor-templates.zip"><nobr>RaptorJS Optimizer: Get Started with the Optimizer Taglib - Sample Code</nobr></a></p><p>Alternatively, you can view the sample code for this guide on Github using the
following link:
<a href="https://github.com/raptorjs/raptorjs.github.com/tree/master/src/sample-projects/optimizer/get-started-raptor-templates">/src/sample-projects/optimizer/get-started-raptor-templates</a></p></div></div><div class="section section-level-0"><h2 id="Creating_a_Package">Creating a Package</h2><div class="bd"><p><img src="../../images/package.png" width="128" height="128" class="section-icon"> The first step to generating optimized web pages is to create packages for all
of your modules. A module is a collection of related resources that work
together to provide functionality in your application. Modules can consist of
resources of any type (JavaScript, CSS, LESS, Raptor Templates, etc.) and
modules can have dependencies on other modules. Packages are necessary so that
the optimizer will understand the dependencies in your application. A package
is defined using a simple
<code>package.json</code> file. The RaptorJS Optimizer utilizes the same format of package files
described in the documentation for the
<a href="../../packaging/">RaptorJS Packaging System</a>. The packaging format is quickly described in this guide, but for more
advanced usage please see the developer guide for the
<a href="../../packaging/">RaptorJS Packaging System</a>.</p> <div class="section section-level-1"><h2 id="Module_Directories">Module Directories</h2><div class="bd"><p>A <code>package.json</code> file should be placed in a directory that corresponds to a module name. For
example, the corresponding
<code>package.json</code> file for a module named "test.hello" should be placed in the following
location:
<code><nobr>&lt;modules-dir>/test/hello/package.json</nobr></code>. In order for the RaptorJS Optimizer to be able to find your modules, you need
to add the root directory containing your modules to the
<a href="../../resource-search-path/"><nobr>RaptorJS Resource Search Path</nobr></a> as shown in the following code:</p><div class="code-editor" id="w820"> <textarea id="w820-textarea" style="display: none;" name="code-69">require('raptor/resources').addSearchPathDir("/path/to/modules");</textarea></div></div></div><div class="section section-level-1"><h2 id="Package_File_Format">Package File Format</h2><div class="bd"><p>At a minimum, a package needs to describe what is included in the package. This
is done by adding a "raptor" » "dependencies" property to a package.json file
that is an array of resources that should be included as part of the package. A
simple
<code>package.json</code> is shown below:</p><div class="code-editor" id="w821"> <textarea id="w821-textarea" style="display: none;" name="code-70">{
    "raptor": {
        "dependencies": [
            "my-widget.js",
            "my-css-stylesheet.css",
            "my-less-stylesheet.less",
            "my-template.rhtml"
        ]
    }
}</textarea></div><p>The above <code>package.json</code> file includes four resources. The RaptorJS Packaging System is flexible enough
to support any type of resource, including resources that need to be compiled
into either JavaScript or CSS (such as
<a href="http://lesscss.org">LESS</a> CSS and <a href="../../raptor-templates/">Raptor Template</a> files). Resource paths that are not prefixed with a forward slash ("/") are
treated as paths relative to the location of the containing
<code>package.json</code> file. Paths that are prefixed with a forward slash are treated as relative to
at least one of the resource search path entries defined for your
application.</p><p>In addition to declaring which resources are included as part of a package, a <code>package.json</code> file can also declare that it depends on another module (i.e., another <code>package.json</code> file). A module dependency can be added using adding <code>{ "module": "&lt;module-name>" }</code> entries as shown in the following example:</p><div class="code-editor" id="w822"> <textarea id="w822-textarea" style="display: none;" name="code-71">{
    "raptor": {
        "dependencies": [
            { "module": "raptor/widgets" },
            { "module": "raptor/templating" },
            "my-widget.js",
            "my-css-stylesheet.css",
            "my-less-stylesheet.less",
            "my-template.rhtml"
        ]
    }
}</textarea></div></div></div></div></div><div class="section section-level-0"><h2 id="Optimizing_a_Page_using_the_Optimizer_Taglib">Optimizing a Page using the Optimizer Taglib</h2><div class="bd"><p><img src="../../images/optimized-delivery.png" width="128" height="128" class="section-icon"> The RaptorJS Optimizer Taglib can be used in conjunction with <a href="../../raptor-templates/">Raptor Templates</a> to generate optimized bundles and inject the required HTML markup. The default
configuration will write all bundles to a "static" directory in the current
working directory of the running process. In addition, the default
configuration will use "/static/" as the URL prefix for all resource URLs. In
addition, by default, no minification or other filters are applied to
JavaScript and CSS code. Lastly, the default configuration configures no
bundles so all resources of the same content type (i.e., either CSS or
JavaScript) targeted for the same slot will be automically bundled
together.</p> <div class="section section-level-1"><h2 id="Example_Setup">Example Setup</h2><div class="bd">For this guide, we will use the following directory structure: <ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates" target="_blank">/optimizer-raptor-templates/</a></b><ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/build.js" target="_blank">build.js</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/build.xml" target="_blank">build.xml</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules" target="_blank">modules/</a></b><ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-a" target="_blank">module-a/</a></b><ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-a/module-a.css" target="_blank">module-a.css</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-a/module-a.js" target="_blank">module-a.js</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-a/package.json" target="_blank">package.json</a></b></li></ul></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-b" target="_blank">module-b/</a></b><ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-b/module-b.css" target="_blank">module-b.css</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-b/module-b.js" target="_blank">module-b.js</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-b/package.json" target="_blank">package.json</a></b></li></ul></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-c" target="_blank">module-c/</a></b><ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-c/module-c.css" target="_blank">module-c.css</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-c/module-c.js" target="_blank">module-c.js</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-c/package.json" target="_blank">package.json</a></b></li></ul></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-d" target="_blank">module-d/</a></b><ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-d/module-d.css" target="_blank">module-d.css</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-d/module-d.js" target="_blank">module-d.js</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/module-d/package.json" target="_blank">package.json</a></b></li></ul></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/pages" target="_blank">pages/</a></b><ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/pages/index" target="_blank">index/</a></b><ul><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/pages/index/index.css" target="_blank">index.css</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/pages/index/index.js" target="_blank">index.js</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/modules/pages/index/index.rhtml" target="_blank">index.rhtml</a></b></li></ul></li></ul></li></ul></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/optimizer-config.xml" target="_blank">optimizer-config.xml</a></b></li><li><b><a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/package.json" target="_blank">package.json</a></b></li></ul></li></ul></div></div><div class="section section-level-1"><h2 id="Page_Template">Page Template</h2><div class="bd"><div class="code-editor" id="w823"> <textarea id="w823-textarea" style="display: none;" name="code-72"><c:template
    xmlns:c="core"
    xmlns:optimizer="optimizer">

    <optimizer:page name="index" base-path="build">
        <dependencies>
            <module name="raptor"/>
            <module name="raptor/loader"/>
            <loader-metadata/>
            <module name="module-a"/>
            <module name="module-b"/>
            <module name="module-c"/>
            <module name="module-d" async="true"/>
            <css path="index.css"/>
            <js path="index.js"/>
        </dependencies>
    </optimizer:page>

    <html>
        <head>
            <title>RaptorJS Optimizer Taglib: Hello World</title>
            <optimizer:slot name="head"/>
        </head>
        <body>
            Hello from the RaptorJS Optimizer Taglib!
            <optimizer:slot name="body"/>
            <script type="text/javascript">
            require('module-c').sayHello();
            require('module-d', function(moduleD) {
                moduleD.sayHello();
            });
            </script>
        </body>
    </html>

</c:template></textarea></div></div></div><div class="section section-level-1"><h2 id="Rendering_and_Optimizing_the_Page">Rendering and Optimizing the Page</h2><div class="bd"><p>The provided <a href="https://github.com/raptorjs/samples/blob/master/optimizer-raptor-templates/build.js">build.js</a> script is used to render the page template shown above. The source for this
script is shown
below:</p><div class="code-editor" id="w824"> <textarea id="w824-textarea" style="display: none;" name="code-73">require('raptor');
require('raptor/logging').configure({
    loggers: {
        'ROOT': {level: 'WARN'},
        "raptor/optimizer": {level: "INFO"},
        "raptor/optimizer/cli": {level: "INFO"}
    }
});

var files = require('raptor/files'),
    templating = require('raptor/templating'),
    resources = require('raptor/resources'),
    optimizer = require('raptor/optimizer'),
    logger = require('raptor/logging').logger('build'),
    outputFile = files.createFile(__dirname + "/build/index.html");


optimizer.configure(
    files.joinPaths(__dirname, "optimizer-config.xml"), 
    {
        profile: process.argv[2] === 'dev' ? 
            'development' : 
            'production'
    });

// Add the modules directory to the resource search 
// path so that the modules can be found
resources.addSearchPathDir(files.joinPaths(__dirname, 'modules'));

try
{
    templating.renderToFile("/pages/index/index.rhtml", outputFile);

    console.log('Optimized HTML page written to disk:\n' + 
        outputFile.getAbsolutePath());
}
catch(e) {
    logger.error(e);
}

</textarea></div><p>The following commands should be executed to generated the optimized page:</p><pre class="sh" style="clear: both;">npm install
node build.js</pre><p>After running the above commands you should see output similar to the following:</p><pre class="sh" style="clear: both;">INFO raptor/optimizer/PageOptimizer: Optimized page bundles for "index" built in 16ms
INFO raptor/optimizer/BundleFileWriter: Writing bundle file to "build/static/index-async-d45d02a6.js"...
INFO raptor/optimizer/BundleWriter: Bundle "index-async" (js) written to disk in 13ms
INFO raptor/optimizer/BundleFileWriter: Writing bundle file to "build/static/index-async-c1c02230.css"...
INFO raptor/optimizer/BundleWriter: Bundle "index-async" (css) written to disk in 1ms
INFO raptor/optimizer/BundleFileWriter: Writing bundle file to "build/static/index-8833d501.js"...
INFO raptor/optimizer/BundleWriter: Bundle "index" (js) written to disk in 4ms
INFO raptor/optimizer/BundleFileWriter: Writing bundle file to "build/static/index-2d2550a1.css"...
INFO raptor/optimizer/BundleWriter: Bundle "index" (css) written to disk in 0ms
INFO raptor/optimizer/PageOptimizer: Optimized page "index" in 45ms
Optimized HTML page written to disk:
build/index.html</pre><p>The optimized output page HTML is written to <code>build/index.html</code> and it should look similar to the following:</p><div class="code-editor" id="w825"> <textarea id="w825-textarea" style="display: none;" name="code-74">&lt;html>
    &lt;head>
        &lt;title>RaptorJS Optimizer Taglib: Hello World&lt;/title>
        &lt;link rel="stylesheet" type="text/css" href="static/index-2d2550a1.css">
    &lt;/head>
    &lt;body>
        Hello from the RaptorJS Optimizer Taglib! 
        &lt;script type="text/javascript" src="static/index-8833d501.js">&lt;/script>
        &lt;script type="text/javascript">
            require('module-c').sayHello(); 
            require('module-d', function(moduleD) {
                moduleD.sayHello();
            });
        &lt;/script>
    &lt;/body>
&lt;/html></textarea></div><p>In the process of rendering the page, the optimized resource bundles written to
disk into the "build/static"
directory.</p><p>NOTE: The optimized resource bundles are only generated when the page is
rendered for the first
time.</p></div></div></div></div><div class="section section-level-0"><h2 id="Configuring_the_Optimizer">Configuring the Optimizer</h2><div class="bd"><p>In most cases, you will want to configure the RaptorJS Optimizer based on how
the optimized web application will be deployed. The RaptorJS Optmizer is
extremely configurable and even supports multiple profiles so that you can
easily switch between different configurations for development, production,
etc. The RaptorJS Optimizer supports an XML configuration file that makes it
easy to enable or disable minification, to control how modules are bundled, to
control how resource URLs are generated,
etc.</p><div class="section section-level-1"><h2 id="Loading_a_Configuration">Loading a Configuration</h2><div class="bd"><p>An optimizer configuration file can be loaded in a number of ways.</p><ul><li><b>From the command line</b>: The optimizer CLI supports a <code>--config</code> option that can be used to load an optimizer configuration file. <pre class="sh" style="clear: both;">$ raptor-optimizer --config path/to/optimizer-config.xml profile=production...</pre><div class="message message-info"><div class="icon"><i class="icon-info-sign" style="font-size: 30px;"></i></div><div class="bd"><p>NOTE: Any options that are not prefixed with <code>-</code> or <code>--</code> are treated as variables in the XML configuration file (see <a href="#variables">XML Configuration Variables</a> below).</p></div></div></li><li><b>In JavaScript</b>: The default optimizer can be configured using the following JavaScript code: <div class="code-editor" id="w826"> <textarea id="w826-textarea" style="display: none;" name="code-75">require('raptor/optimizer').configure('path/to/optimizer-config.xml', {
    profile: "production"
})</textarea></div><div class="message message-info"><div class="icon"><i class="icon-info-sign" style="font-size: 30px;"></i></div><div class="bd"><p>NOTE: The properties of the second argument can be used as variables in the XML
configuration file (see
<a href="#variables">XML Configuration Variables</a> below).</p></div></div></li></ul></div></div><div class="section section-level-1"><h2 id="XML_Configuration_File">XML Configuration File</h2><div class="bd"><p>A simple configuration file is shown below:</p><div class="code-editor" id="w827"> <textarea id="w827-textarea" style="display: none;" name="code-76">&lt;optimizer-config>

    &lt;minify-js>${minify}&lt;/minify-js>
    &lt;output-dir>static&lt;/output-dir>
    &lt;url-prefix>http://my-cdn/static/&lt;/url-prefix>

    &lt;bundles name="default">

        &lt;bundle name="jquery">
            &lt;module name="jQuery" recursive="true"/>
        &lt;/bundle>

        &lt;bundle name="core">
            &lt;module name="raptor" recursive="true"/>
            &lt;module name="raptor/listeners" recursive="true"/>
            &lt;module name="raptor/widgets" recursive="true"/>
        &lt;/bundle>
        
        &lt;bundle name="templating">
            &lt;module name="raptor/templating" recursive="true"/>
        &lt;/bundle>

    &lt;/bundles>
    
&lt;/optimizer-config></textarea></div><p>A slightly more complex example with profiles and variables is shown below:</p><div class="code-editor" id="w828"> <textarea id="w828-textarea" style="display: none;" name="code-77">&lt;optimizer-config>

    &lt;output-dir>static&lt;/output-dir>

    &lt;params>
        &lt;!-- Default to the production profile -->
        &lt;profile>production&lt;/profile>
    &lt;/params>
    
    &lt;enable-profile>${profile}&lt;/enable-profile>

    &lt;profile name="production">
        &lt;minify>true&lt;/minify>
        &lt;url-prefix>http://my-cdn/static/&lt;/url-prefix>
        &lt;bundling-enabled>true&lt;/bundling-enabled>
        &lt;in-place-deployment-enabled>false&lt;/in-place-deployment-enabled>
        &lt;checksums-enabled>true&lt;/checksums-enabled>
    &lt;/profile>
    
    &lt;profile name="development">
        &lt;minify>false&lt;/minify>
        &lt;url-prefix>/static/&lt;/url-prefix>
        &lt;bundling-enabled>false&lt;/bundling-enabled>
        &lt;in-place-deployment-enabled>true&lt;/in-place-deployment-enabled>
        &lt;checksums-enabled>false&lt;/checksums-enabled>
    &lt;/profile>

    &lt;bundles name="default">

        &lt;bundle name="jquery">
            &lt;module name="jQuery" recursive="true"/>
        &lt;/bundle>

        &lt;bundle name="core">
            &lt;module name="raptor" recursive="true"/>
            &lt;module name="raptor/listeners" recursive="true"/>
            &lt;module name="raptor/widgets" recursive="true"/>
        &lt;/bundle>
        
        &lt;bundle name="templating">
            &lt;module name="raptor/templating" recursive="true"/>
        &lt;/bundle>

    &lt;/bundles>
    
&lt;/optimizer-config></textarea></div><p>An optimizer XML configuration file is very flexible and gives application
developers a lot of control over the optimization process. Amongst other
things, the optimizer configuration file allows developers to define resource
bundles. If a page depends on a resource that is part of a bundle then the
entire bundle will be included in the optimized page. By default, any resource
that is not part of a bundle is bundled with all other resources that are not
part of a bundle and are of the same content type and targeted for the same
slot. If resources are used across multiple pages, or if you would to enable
the web browser to downloaded multiple resource bundles in parallel then it is
important to define resource bundles for your
application.</p><p>Below is a quick summary of the important configuration options that the
optimizer XML configuration file
supports:</p><ul><li><b>Resource bundles</b>: Configure any number of bundles dependin on your application's needs</li><li><b>Enabling/disabling resource bundling</b>: If bundling is disabled then the resource bundles defined in the XML
configuration file will be
ignored</li><li><b>In-place deployment</b>: Have the optimizer generate URLs to the original resource on disk (the
original resource will remain
untouched)</li><li><b>URL prefix</b>: Configure a special URL prefix for all URLs to optimized bundles. This option
is necessary for certain server configurations and for utilizing a CDN host
name</li><li><b>Output directory</b>: Tell the optimizer where to write bundles to disk</li><li><b>Enabling/disabling minification</b>: If minification is enabled then resources will be processed to reduce their
size</li></ul><p>For a full list of configuration options that are supported, please see the <a href="../../optimizer/developer-guide/">RaptorJS Optimizer Developer Guide. </a></p></div></div><div class="section section-level-1"><h2 id="variables">XML Configuration Variables</h2><div class="bd"><p>Variables can be used insde the XML configuration file using the
${&lt;variable-name>} syntax. Variables can be used in place of hard coded
values to make the configuration more dynamic. For
example:</p><div class="code-editor" id="w829"> <textarea id="w829-textarea" style="display: none;" name="code-78">&lt;optimizer-config>
    ...
    &lt;enable-profile>${profile}&lt;/enable-profile>
    &lt;profile name="production">
        &lt;!-- production settings go here -->
        &lt;minify>true&lt;/minify>
        ...
    &lt;/profile>
    &lt;profile name="development">
        &lt;!-- development settings go here-->
        &lt;minify>false&lt;/minify>
        ...
    &lt;/profile>

    ...
&lt;/optimizer-config></textarea></div><p>In the above example, a variable is used to control which profile gets enabled.</p></div></div></div></div><div class="section section-level-0"><h2 id="Discussion">Discussion</h2><div class="bd"><div id="disqus_thread"></div></div></div></div></div><div class="docs-footer-padding"></div></div></div><script type="text/javascript" src="../../static/core-f5729fb0.js"></script>
<script type="text/javascript" src="../../static/jquery-371da524.js"></script>
<script type="text/javascript" src="../../static/widgets-80dede79.js"></script>
<script type="text/javascript" src="../../static/optimizer-get-started-raptor-templates-02c7930e.js"></script>
<script type="text/javascript" src="../../static/code-editor-36478451.js"></script><script type="text/javascript">$rwidgets(
["components.nav.Nav.NavItemWidget","w788",0,0,0,0],
["components.nav.Nav.NavItemWidget","w789",0,0,0,0,
["components.nav.Nav.NavItemWidget","w790",0,0,0,0],
["components.nav.Nav.NavItemWidget","w791",0,0,0,0],
["components.nav.Nav.NavItemWidget","w792",0,0,0,0],
["components.nav.Nav.NavItemWidget","w793",0,0,0,0],
["components.nav.Nav.NavItemWidget","w794",0,0,0,0],
["components.nav.Nav.NavItemWidget","w795",0,0,0,0],
["components.nav.Nav.NavItemWidget","w796",0,0,0,0],
["components.nav.Nav.NavItemWidget","w797",0,0,0,0],
["components.nav.Nav.NavItemWidget","w798",0,0,0,0],
["components.nav.Nav.NavItemWidget","w799",0,0,0,0],
["components.nav.Nav.NavItemWidget","w800",0,0,0,0],
["components.nav.Nav.NavItemWidget","w801",0,0,0,0],
["components.nav.Nav.NavItemWidget","w802",0,0,0,0],
["components.nav.Nav.NavItemWidget","w803",0,0,0,0],
["components.nav.Nav.NavItemWidget","w804",0,0,0,0],
["components.nav.Nav.NavItemWidget","w805",0,0,0,0]],
["components.nav.Nav.NavItemWidget","w806",0,0,0,0,
["components.nav.Nav.NavItemWidget","w807",0,0,0,0],
["components.nav.Nav.NavItemWidget","w808",0,0,0,0],
["components.nav.Nav.NavItemWidget","w809",0,0,0,0],
["components.nav.Nav.NavItemWidget","w810",0,0,0,0],
["components.nav.Nav.NavItemWidget","w811",0,0,0,0],
["components.nav.Nav.NavItemWidget","w812",0,0,0,0],
["components.nav.Nav.NavItemWidget","w813",0,0,0,0]],
["components.nav.Nav.NavItemWidget","w814",0,0,0,0,
["components.nav.Nav.NavItemWidget","w815",0,0,0,0],
["components.nav.Nav.NavItemWidget","w816",0,0,0,0],
["components.nav.Nav.NavItemWidget","w817",0,0,0,0],
["components.nav.Nav.NavItemWidget","w818",0,0,0,0],
["components.nav.Nav.NavItemWidget","w819",0,0,0,0]],
["components/editors/CodeEditor/CodeEditorWidget","w820",{"mode":"javascript","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w821",{"mode":"javascript","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w822",{"mode":"javascript","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w823",{"mode":"xml","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w824",{"mode":"javascript","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w825",{"mode":"htmlmixed","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w826",{"mode":"javascript","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w827",{"mode":"xml","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w828",{"mode":"xml","autoResize":true,"readOnly":true},0,0,0],
["components/editors/CodeEditor/CodeEditorWidget","w829",{"mode":"xml","autoResize":true,"readOnly":true},0,0,0],
["components.social.Disqus.DisqusWidget","disqus_thread",{"shortName":"raptor-js","id":"optimizer-get-started-raptor-templates","title":"RaptorJS Optmizer: Get Started with the Optimizer Taglib"},0,0,0]);</script></body></html>